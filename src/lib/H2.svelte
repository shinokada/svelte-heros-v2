<script lang="ts">
  import { getContext } from 'svelte';
  import type { CtxType, Props } from './types';

  const ctx: CtxType = getContext('iconCtx') ?? {};

  let {
    size = ctx.size || '24',
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || 'outline',
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    ariaLabel = 'h2',
    ...restProps
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));
  let viewBox: string | undefined = $state(undefined);

  $effect(() => {
    if (variation === 'mini') {
      size = size || '20';
      viewBox = '0 0 20 20';
    } else if (variation === 'micro') {
      size = size || '16';
      viewBox = '0 0 16 16';
    } else {
      size = size || '24';
      viewBox = '0 0 24 24';
    }
  });
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size}
  height={size}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {#if variation === 'outline'}
    <path
      d="M21.7501 19.5008H16.5001V17.8914C16.5001 17.0391 16.9816 16.26 17.7439 15.8789L20.6335 14.4341C21.285 14.1083 21.7501 13.4791 21.7501 12.7507C21.7501 12.2525 21.7096 11.7637 21.6318 11.2875C21.497 10.463 20.7972 9.86577 19.9644 9.79906C19.5639 9.76697 19.1589 9.75061 18.7501 9.75061C17.9854 9.75061 17.2341 9.80784 16.5001 9.91824M2.24316 4.49316V11.9939M2.24316 11.9939V19.4946M2.24316 11.9939L12.7434 11.9946M12.7434 4.49389V11.9946M12.7434 11.9946V19.4953"
      stroke={color}
      stroke-width={strokeWidth}
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  {:else if variation === 'mini'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M2.75 4C3.16421 4 3.5 4.33579 3.5 4.75V9.25H8.5V4.75C8.5 4.33579 8.83579 4 9.25 4C9.66421 4 10 4.33579 10 4.75V15.25C10 15.6642 9.66421 16 9.25 16C8.83579 16 8.5 15.6642 8.5 15.25V10.75H3.5V15.25C3.5 15.6642 3.16421 16 2.75 16C2.33579 16 2 15.6642 2 15.25V4.75C2 4.33579 2.33579 4 2.75 4ZM15 9.5C14.2714 9.5 13.5551 9.55104 12.8545 9.64965C12.4444 9.70737 12.065 9.42166 12.0073 9.01149C11.9496 8.60132 12.2353 8.22201 12.6455 8.16428C13.4151 8.05596 14.2012 8 15 8C15.4951 8 15.9853 8.0215 16.4698 8.06364C17.3246 8.13799 17.9824 8.84381 17.9974 9.70117C17.9991 9.80058 18 9.90019 18 10C18 10.2117 17.9961 10.4226 17.9883 10.6325C17.9611 11.3641 17.4695 11.9674 16.8088 12.1876L14.3547 13.0057C13.8443 13.1758 13.5 13.6535 13.5 14.1915V14.5H17.25C17.6642 14.5 18 14.8358 18 15.25C18 15.6642 17.6642 16 17.25 16H12.75C12.3358 16 12 15.6642 12 15.25V14.1915C12 13.0078 12.7574 11.957 13.8804 11.5826L16.3345 10.7646C16.4363 10.7307 16.4866 10.6483 16.4893 10.5768C16.4964 10.3854 16.5 10.1932 16.5 10C16.5 9.90895 16.4992 9.81809 16.4976 9.72743C16.496 9.6374 16.4289 9.56575 16.3398 9.558C15.8985 9.51961 15.4516 9.5 15 9.5Z"
      fill={color}
    />
  {:else if variation === 'micro'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M1.75 3C2.16421 3 2.5 3.33579 2.5 3.75V7.25H6.5V3.75C6.5 3.33579 6.83579 3 7.25 3C7.66421 3 8 3.33579 8 3.75V12.25C8 12.6642 7.66421 13 7.25 13C6.83579 13 6.5 12.6642 6.5 12.25V8.75H2.5V12.25C2.5 12.6642 2.16421 13 1.75 13C1.33579 13 1 12.6642 1 12.25V3.75C1 3.33579 1.33579 3 1.75 3ZM12.5 7.5C11.942 7.5 11.3939 7.54057 10.8584 7.61881C10.4486 7.67869 10.0678 7.39498 10.0079 6.98512C9.94799 6.57526 10.2317 6.19445 10.6416 6.13457C11.2486 6.04587 11.8692 6 12.5 6C12.8289 6 13.155 6.01247 13.4779 6.03698C14.2855 6.09829 14.9504 6.74134 14.9901 7.57964C14.9967 7.71898 15 7.85913 15 8C15 8.25126 14.9894 8.50022 14.9686 8.74642C14.9092 9.44778 14.416 9.98522 13.8101 10.1872L11.6709 10.9003C11.5689 10.9343 11.5 11.0298 11.5 11.1374V11.5H14.25C14.6642 11.5 15 11.8358 15 12.25C15 12.6642 14.6642 13 14.25 13H10.75C10.3358 13 10 12.6642 10 12.25V11.1374C10 10.3842 10.482 9.71543 11.1966 9.47723L13.3358 8.76417C13.4362 8.7307 13.4705 8.66054 13.4739 8.62001C13.4912 8.4158 13.5 8.20902 13.5 8C13.5 7.88281 13.4972 7.76633 13.4917 7.65061C13.4892 7.59775 13.4464 7.5389 13.3644 7.53268C13.0792 7.51103 12.791 7.5 12.5 7.5Z"
      fill={color}
    />
  {:else}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M2.24609 3.74316C2.66031 3.74316 2.99609 4.07896 2.99609 4.49318V11.2439H11.9963V4.49318C11.9963 4.07896 12.3321 3.74316 12.7463 3.74316C13.1605 3.74316 13.4963 4.07896 13.4963 4.49318V19.4946C13.4963 19.9089 13.1605 20.2446 12.7463 20.2446C12.3321 20.2446 11.9963 19.9089 11.9963 19.4946V12.7439H2.99609V19.4946C2.99609 19.9089 2.66031 20.2446 2.24609 20.2446C1.83188 20.2446 1.49609 19.9089 1.49609 19.4946V4.49318C1.49609 4.07896 1.83188 3.74316 2.24609 3.74316ZM18.7502 10.5C18.023 10.5 17.3089 10.5544 16.6118 10.6592C16.2022 10.7209 15.8202 10.4387 15.7586 10.0291C15.6969 9.61951 15.979 9.23751 16.3887 9.17589C17.1594 9.05995 17.948 8.99992 18.7502 8.99992C19.179 8.99992 19.604 9.01707 20.0244 9.05075C21.1727 9.14274 22.1771 9.97353 22.3721 11.1658C22.4564 11.6819 22.5002 12.2111 22.5002 12.75C22.5002 13.815 21.824 14.6767 20.969 15.1042L18.0794 16.549C17.5712 16.8031 17.2502 17.3225 17.2502 17.8907V18.7502H21.7502C22.1644 18.7502 22.5002 19.0859 22.5002 19.5002C22.5002 19.9144 22.1644 20.2502 21.7502 20.2502H16.5002C16.086 20.2502 15.7502 19.9144 15.7502 19.5002V17.8907C15.7502 16.7544 16.3922 15.7155 17.4086 15.2074L20.2981 13.7625C20.7461 13.5385 21.0002 13.142 21.0002 12.75C21.0002 12.2925 20.963 11.8442 20.8917 11.4078C20.817 10.9511 20.4219 10.5874 19.9046 10.546C19.524 10.5155 19.139 10.5 18.7502 10.5Z"
      fill={color}
    />
  {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size || '24'
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || 'outline'
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop ariaLabel = 'h2'
@prop ...restProps
-->
