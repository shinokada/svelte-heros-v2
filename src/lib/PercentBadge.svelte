<script lang="ts">
  import { getContext } from 'svelte';
  import type { BaseProps, Props } from './types';

  const ctx: BaseProps = getContext('iconCtx') ?? {};

  let {
    size = ctx.size,
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || 'outline',
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    ariaLabel = 'percent badge',
    ...restProps
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));

  let viewBox = $derived.by(() => {
    if (variation === 'mini') return '0 0 20 20';
    if (variation === 'micro') return '0 0 16 16';
    return '0 0 24 24';
  });
  let variationSize = $derived.by(() => {
    if (variation === 'mini') return '20';
    if (variation === 'micro') return '16';
    return '24';
  });
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size || variationSize}
  height={size || variationSize}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {#if variation === 'outline'}
    <path
      d="M8.99044 14.9934L14.9903 8.99282M20.9899 11.994C20.9899 13.2624 20.3603 14.3838 19.3966 15.0625C19.598 16.2238 19.2503 17.4618 18.3537 18.3586C17.457 19.2554 16.2192 19.603 15.058 19.4016C14.3793 20.3653 13.2582 20.9949 11.9901 20.9949C10.7219 20.9949 9.60083 20.3654 8.92216 19.4017C7.7608 19.6034 6.52272 19.2557 5.62589 18.3588C4.72906 17.4618 4.38145 16.2236 4.58306 15.0622C3.61963 14.3834 2.99023 13.2622 2.99023 11.994C2.99023 10.7258 3.61968 9.60457 4.58318 8.92582C4.38168 7.76442 4.7293 6.52634 5.62605 5.62949C6.52282 4.73262 7.76077 4.38496 8.92206 4.5865C9.60071 3.62277 10.7219 2.99316 11.9901 2.99316C13.2582 2.99316 14.3793 3.62272 15.058 4.58638C16.2193 4.38474 17.4574 4.73239 18.3542 5.62932C19.251 6.52624 19.5987 7.76443 19.3971 8.92591C20.3605 9.60467 20.9899 10.7258 20.9899 11.994ZM9.74042 9.74289H9.74792V9.75039H9.74042V9.74289ZM10.1154 9.74289C10.1154 9.95002 9.94752 10.1179 9.74042 10.1179C9.53332 10.1179 9.36543 9.95002 9.36543 9.74289C9.36543 9.53576 9.53332 9.36785 9.74042 9.36785C9.94752 9.36785 10.1154 9.53576 10.1154 9.74289ZM14.2403 14.2433H14.2478V14.2508H14.2403V14.2433ZM14.6153 14.2433C14.6153 14.4504 14.4474 14.6184 14.2403 14.6184C14.0332 14.6184 13.8653 14.4504 13.8653 14.2433C13.8653 14.0362 14.0332 13.8683 14.2403 13.8683C14.4474 13.8683 14.6153 14.0362 14.6153 14.2433Z"
      stroke={color}
      stroke-width={strokeWidth}
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  {:else if variation === 'mini'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M3.59677 7.34773C2.64697 7.85128 2 8.85009 2 10C2 11.1501 2.64714 12.149 3.59715 12.6525C3.28164 13.6801 3.53043 14.8438 4.34352 15.6569C5.15657 16.47 6.32018 16.7188 7.3478 16.4034C7.85137 17.3531 8.85014 18 10 18C11.1499 18 12.1487 17.353 12.6523 16.4032C13.68 16.7189 14.8438 16.4701 15.657 15.657C16.4702 14.8438 16.7189 13.68 16.4033 12.6522C17.3531 12.1487 18 11.1499 18 10C18 8.84992 17.3528 7.851 16.4028 7.34752C16.7184 6.31985 16.4696 5.15611 15.6565 4.343C14.8434 3.52994 13.6798 3.28114 12.6522 3.59658C12.1486 2.64689 11.1498 2 10 2C8.8501 2 7.85131 2.64695 7.34775 3.59673C6.32004 3.28111 5.15622 3.52988 4.34307 4.34303C3.52991 5.15619 3.28115 6.32001 3.59677 7.34773ZM13.5303 7.53033C13.8232 7.23744 13.8232 6.76256 13.5303 6.46967C13.2374 6.17678 12.7626 6.17678 12.4697 6.46967L6.46967 12.4697C6.17678 12.7626 6.17678 13.2374 6.46967 13.5303C6.76256 13.8232 7.23744 13.8232 7.53033 13.5303L13.5303 7.53033ZM14 12.75C14 13.4404 13.4404 14 12.75 14C12.0596 14 11.5 13.4404 11.5 12.75C11.5 12.0596 12.0596 11.5 12.75 11.5C13.4404 11.5 14 12.0596 14 12.75ZM7.25 8.5C7.94036 8.5 8.5 7.94036 8.5 7.25C8.5 6.55964 7.94036 6 7.25 6C6.55964 6 6 6.55964 6 7.25C6 7.94036 6.55964 8.5 7.25 8.5Z"
      fill={color}
    />
  {:else if variation === 'micro'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M3.39568 6.09292C2.58649 6.34911 2 7.10606 2 8C2 8.89408 2.58668 9.65114 3.39607 9.9072C3.00501 10.6605 3.12554 11.6105 3.75766 12.2426C4.38973 12.8747 5.33961 12.9953 6.09292 12.6043C6.34911 13.4135 7.10606 14 8 14C8.89414 14 9.65124 13.4132 9.90725 12.6038C10.6606 12.995 11.6108 12.8745 12.243 12.2423C12.8751 11.6102 12.9957 10.6603 12.6046 9.90697C13.4137 9.65069 14 8.89382 14 8C14 7.10586 13.4132 6.34876 12.6038 6.09275C12.995 5.33936 12.8745 4.3892 12.2423 3.75699C11.6102 3.12489 10.6603 3.00434 9.90697 3.39536C9.65069 2.58633 8.89382 2 8 2C7.10592 2 6.34886 2.58668 6.0928 3.39607C5.33946 3.00501 4.38948 3.12554 3.75736 3.75766C3.12529 4.38973 3.00473 5.33961 3.39568 6.09292ZM6 7C6.55228 7 7 6.55228 7 6C7 5.44772 6.55228 5 6 5C5.44772 5 5 5.44772 5 6C5 6.55228 5.44772 7 6 7ZM9.46967 5.46967C9.76256 5.17678 10.2374 5.17678 10.5303 5.46967C10.8232 5.76256 10.8232 6.23744 10.5303 6.53033L6.53033 10.5303C6.23744 10.8232 5.76256 10.8232 5.46967 10.5303C5.17678 10.2374 5.17678 9.76256 5.46967 9.46967L9.46967 5.46967ZM11 10C11 10.5523 10.5523 11 10 11C9.44771 11 9 10.5523 9 10C9 9.44771 9.44771 9 10 9C10.5523 9 11 9.44771 11 10Z"
      fill={color}
    />
  {:else}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M11.9896 2.24316C10.6329 2.24316 9.41666 2.84416 8.5925 3.79207C7.3395 3.70461 6.05453 4.13977 5.09522 5.09919C4.1359 6.05862 3.70081 7.34372 3.78827 8.59683C2.84057 9.42108 2.23975 10.6374 2.23975 11.9941C2.23975 13.3507 2.84051 14.5669 3.78813 15.3912C3.70057 16.6444 4.13564 17.9296 5.09505 18.8891C6.05445 19.8487 7.33955 20.2838 8.59266 20.1962C9.41681 21.1441 10.633 21.745 11.9896 21.745C13.3463 21.745 14.5625 21.144 15.3866 20.1961C16.6395 20.2834 17.9243 19.8483 18.8836 18.8889C19.8428 17.9296 20.2779 16.6446 20.1905 15.3916C21.1384 14.5674 21.7394 13.3509 21.7394 11.9941C21.7394 10.6375 21.1387 9.42121 20.191 8.59697C20.2786 7.34376 19.8435 6.05853 18.8841 5.09903C17.9247 4.13952 16.6396 3.70437 15.3865 3.79193C14.5624 2.8441 13.3462 2.24316 11.9896 2.24316ZM15.52 9.52295C15.8129 9.23003 15.8128 8.75513 15.5199 8.46223C15.227 8.16934 14.7521 8.16936 14.4593 8.46228L8.45937 14.4629C8.16648 14.7558 8.1665 15.2307 8.45941 15.5236C8.75233 15.8165 9.22721 15.8164 9.5201 15.5235L15.52 9.52295ZM9.73972 8.61761C9.11833 8.61761 8.61471 9.12139 8.61471 9.74269C8.61471 10.364 9.11833 10.8678 9.73972 10.8678C10.3611 10.8678 10.8647 10.364 10.8647 9.74269C10.8647 9.12139 10.3611 8.61761 9.73972 8.61761ZM14.2396 13.118C13.6182 13.118 13.1146 13.6218 13.1146 14.2431C13.1146 14.8644 13.6182 15.3682 14.2396 15.3682C14.861 15.3682 15.3646 14.8644 15.3646 14.2431C15.3646 13.6218 14.861 13.118 14.2396 13.118Z"
      fill={color}
    />
  {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || 'outline'
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop ariaLabel = 'percent badge'
@prop ...restProps
-->
