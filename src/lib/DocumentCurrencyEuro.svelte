<script lang="ts">
  import { getContext } from 'svelte';
  import type { CtxType, Props } from './types'
  
  const ctx: CtxType = getContext('iconCtx') ?? {};

  let { 
    size = ctx.size || '24', 
    role = ctx.role || 'img', 
    color = ctx.color || 'currentColor', 
    variation = ctx.variation || "outline",
    strokeWidth = ctx.strokeWidth || '1.5',
    title, 
    desc, 
    ariaLabel = "document currency euro", 
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));
  let viewBox: string = $state(''); 

  $effect(() => {
    if (variation === 'mini') {
      size = size || "20";
      viewBox = '0 0 20 20';
    } else if (variation === 'micro'){
      size = size || "16";
      viewBox = '0 0 16 16';
    } else {
      size = size || "24";
      viewBox = '0 0 24 24';
    }
  })
  
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size}
  height={size}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id="{title.id}">{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id="{desc.id}">{desc.desc}</desc>
  {/if}
    {#if variation === 'outline'}
      <path d="M19.5 14.25V11.625C19.5 9.76104 17.989 8.25 16.125 8.25H14.625C14.0037 8.25 13.5 7.74632 13.5 7.125V5.625C13.5 3.76104 11.989 2.25 10.125 2.25H8.25M8.25 13.875H12.75M8.25 16.125H12.75M14.8713 17.6517C13.6997 19.1161 11.8003 19.1161 10.6287 17.6517C9.45711 16.1872 9.45711 13.8128 10.6287 12.3483C11.8003 10.8839 13.6997 10.8839 14.8713 12.3483M10.5 2.25H5.625C5.00368 2.25 4.5 2.75368 4.5 3.375V20.625C4.5 21.2463 5.00368 21.75 5.625 21.75H18.375C18.9963 21.75 19.5 21.2463 19.5 20.625V11.25C19.5 6.27944 15.4706 2.25 10.5 2.25Z" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
    {:else if variation === 'mini'}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 2C3.67157 2 3 2.67157 3 3.5V16.5C3 17.3284 3.67157 18 4.5 18H15.5C16.3284 18 17 17.3284 17 16.5V7.62132C17 7.2235 16.842 6.84197 16.5607 6.56066L12.4393 2.43934C12.158 2.15804 11.7765 2 11.3787 2H4.5ZM8.79767 8.45038C9.31032 7.78 9.93284 7.5 10.5 7.5C11.0672 7.5 11.6897 7.78 12.2023 8.45038C12.4539 8.77942 12.9247 8.84218 13.2537 8.59056C13.5827 8.33895 13.6455 7.86824 13.3939 7.53921C12.6373 6.54986 11.5963 6 10.5 6C9.40366 6 8.36269 6.54986 7.60613 7.53921C7.27168 7.97657 7.01308 8.47233 6.83031 9H5.75C5.33579 9 5 9.33579 5 9.75C5 10.1642 5.33579 10.5 5.75 10.5H6.51977C6.49341 10.8324 6.49341 11.1676 6.51977 11.5H5.75C5.33579 11.5 5 11.8358 5 12.25C5 12.6642 5.33579 13 5.75 13H6.83031C7.01308 13.5277 7.27168 14.0234 7.60613 14.4608C8.36269 15.4501 9.40366 16 10.5 16C11.5963 16 12.6373 15.4501 13.3939 14.4608C13.6455 14.1318 13.5827 13.661 13.2537 13.4094C12.9247 13.1578 12.4539 13.2206 12.2023 13.5496C11.6897 14.22 11.0672 14.5 10.5 14.5C9.93284 14.5 9.31032 14.22 8.79767 13.5496C8.66735 13.3792 8.55299 13.1948 8.4546 13H10.25C10.6642 13 11 12.6642 11 12.25C11 11.8358 10.6642 11.5 10.25 11.5H8.02592C7.99136 11.1685 7.99136 10.8315 8.02592 10.5H10.25C10.6642 10.5 11 10.1642 11 9.75C11 9.33579 10.6642 9 10.25 9H8.4546C8.55299 8.80515 8.66735 8.62081 8.79767 8.45038Z" fill="{color}"/> 
    {:else if variation === 'micro'}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 3.5C2.5 2.67157 3.17157 2 4 2H8.87868C9.2765 2 9.65804 2.15804 9.93934 2.43934L13.0607 5.56066C13.342 5.84197 13.5 6.2235 13.5 6.62132V12.5C13.5 13.3284 12.8284 14 12 14H4C3.17157 14 2.5 13.3284 2.5 12.5V3.5ZM7.05213 6.23422C7.40595 5.64453 7.77213 5.5 8 5.5C8.22787 5.5 8.59405 5.64453 8.94787 6.23422C9.16098 6.58941 9.62168 6.70458 9.97686 6.49147C10.332 6.27836 10.4472 5.81766 10.2341 5.46248C9.70925 4.5877 8.92378 4 8 4C7.07622 4 6.29075 4.58771 5.76589 5.46248C5.5739 5.78245 5.41993 6.13263 5.30183 6.5H4.75C4.33579 6.5 4 6.83579 4 7.25C4 7.66421 4.33579 8 4.75 8H5.01785C5.00589 8.16697 5 8.33398 5 8.5C5 8.66602 5.00589 8.83303 5.01785 9H4.75C4.33579 9 4 9.33579 4 9.75C4 10.1642 4.33579 10.5 4.75 10.5H5.30183C5.41993 10.8674 5.5739 11.2175 5.76589 11.5375C6.29075 12.4123 7.07622 13 8 13C8.92378 13 9.70925 12.4123 10.2341 11.5375C10.4472 11.1823 10.332 10.7216 9.97686 10.5085C9.62168 10.2954 9.16098 10.4106 8.94787 10.7658C8.59405 11.3555 8.22787 11.5 8 11.5C7.77213 11.5 7.40595 11.3555 7.05213 10.7658C7.00166 10.6817 6.95435 10.5929 6.91033 10.5H7.25C7.66421 10.5 8 10.1642 8 9.75C8 9.33579 7.66421 9 7.25 9H6.52268C6.50767 8.83584 6.5 8.6687 6.5 8.5C6.5 8.3313 6.50767 8.16416 6.52268 8H7.25C7.66421 8 8 7.66421 8 7.25C8 6.83579 7.66421 6.5 7.25 6.5H6.91033C6.95435 6.40711 7.00166 6.31833 7.05213 6.23422Z" fill="{color}"/> 
    {:else}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 3.375C3.75 2.33947 4.58947 1.5 5.625 1.5H9C11.0711 1.5 12.75 3.17893 12.75 5.25V7.125C12.75 8.16053 13.5895 9 14.625 9H16.5C18.5711 9 20.25 10.6789 20.25 12.75V20.625C20.25 21.6605 19.4105 22.5 18.375 22.5H5.625C4.58947 22.5 3.75 21.6605 3.75 20.625V3.375ZM11.2143 12.8169C11.6727 12.2438 12.233 12 12.75 12C13.267 12 13.8273 12.2438 14.2857 12.8169C14.5444 13.1403 15.0164 13.1928 15.3398 12.934C15.6633 12.6752 15.7157 12.2033 15.457 11.8798C14.7438 10.9884 13.7685 10.5 12.75 10.5C11.7315 10.5 10.7562 10.9884 10.043 11.8798C9.74355 12.2542 9.50857 12.6761 9.33807 13.125H8.25C7.83579 13.125 7.5 13.4608 7.5 13.875C7.5 14.2892 7.83579 14.625 8.25 14.625H9.01289C8.9957 14.8745 8.9957 15.1255 9.01289 15.375H8.25C7.83579 15.375 7.5 15.7108 7.5 16.125C7.5 16.5392 7.83579 16.875 8.25 16.875H9.33807C9.50857 17.3239 9.74355 17.7458 10.043 18.1202C10.7562 19.0116 11.7315 19.5 12.75 19.5C13.7685 19.5 14.7438 19.0116 15.457 18.1202C15.7157 17.7967 15.6633 17.3248 15.3398 17.066C15.0164 16.8072 14.5444 16.8597 14.2857 17.1831C13.8273 17.7562 13.267 18 12.75 18C12.233 18 11.6727 17.7562 11.2143 17.1831C11.1362 17.0855 11.0645 16.9825 10.9992 16.875H12.75C13.1642 16.875 13.5 16.5392 13.5 16.125C13.5 15.7108 13.1642 15.375 12.75 15.375H10.5178C10.4941 15.126 10.4941 14.874 10.5178 14.625H12.75C13.1642 14.625 13.5 14.2892 13.5 13.875C13.5 13.4608 13.1642 13.125 12.75 13.125H10.9992C11.0645 13.0175 11.1362 12.9145 11.2143 12.8169Z" fill="{color}"/> <path d="M14.25 5.25C14.25 3.93695 13.768 2.73648 12.9712 1.8159C16.3701 2.70377 19.0462 5.37988 19.9341 8.77881C19.0135 7.98204 17.8131 7.5 16.5 7.5H14.625C14.4179 7.5 14.25 7.33211 14.25 7.125V5.25Z" fill="{color}"/> 
    {/if}
</svg>



