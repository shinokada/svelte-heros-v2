<script lang="ts">
  import { getContext } from 'svelte';
  import type { BaseProps, Props } from './types';

  const ctx: BaseProps = getContext('iconCtx') ?? {};

  let {
    size = ctx.size,
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || 'outline',
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    ariaLabel = 'puzzle piece',
    ...restProps
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));

  let viewBox = $derived.by(() => {
    if (variation === 'mini') return '0 0 20 20';
    if (variation === 'micro') return '0 0 16 16';
    return '0 0 24 24';
  });
  let variationSize = $derived.by(() => {
    if (variation === 'mini') return '20';
    if (variation === 'micro') return '16';
    return '24';
  });
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size || variationSize}
  height={size || variationSize}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {#if variation === 'outline'}
    <path
      d="M14.25 6.08694C14.25 5.73178 14.4361 5.41076 14.6512 5.1282C14.8721 4.8381 15 4.494 15 4.125C15 3.08947 13.9926 2.25 12.75 2.25C11.5074 2.25 10.5 3.08947 10.5 4.125C10.5 4.494 10.6279 4.8381 10.8488 5.1282C11.064 5.41076 11.25 5.73178 11.25 6.08694V6.08694C11.25 6.44822 10.9542 6.73997 10.593 6.72957C9.18939 6.68914 7.80084 6.58845 6.42989 6.43C6.61626 8.04276 6.72269 9.67987 6.74511 11.3373C6.75007 11.7032 6.45293 12 6.08694 12V12C5.73178 12 5.41076 11.814 5.1282 11.5988C4.8381 11.3779 4.494 11.25 4.125 11.25C3.08947 11.25 2.25 12.2574 2.25 13.5C2.25 14.7426 3.08947 15.75 4.125 15.75C4.494 15.75 4.8381 15.6221 5.1282 15.4012C5.41076 15.186 5.73178 15 6.08694 15V15C6.39613 15 6.64157 15.2608 6.6189 15.5691C6.49306 17.2812 6.27742 18.9682 5.97668 20.6256C7.49458 20.8157 9.03451 20.9348 10.5931 20.9797C10.9542 20.9901 11.2501 20.6983 11.2501 20.337V20.337C11.2501 19.9818 11.0641 19.6608 10.8489 19.3782C10.628 19.0881 10.5001 18.744 10.5001 18.375C10.5001 17.3395 11.5075 16.5 12.7501 16.5C13.9928 16.5 15.0001 17.3395 15.0001 18.375C15.0001 18.744 14.8722 19.0881 14.6513 19.3782C14.4362 19.6608 14.2501 19.9818 14.2501 20.337V20.337C14.2501 20.6699 14.5281 20.9357 14.8605 20.9161C16.6992 20.8081 18.5102 20.5965 20.2876 20.2872C20.5571 18.7389 20.7523 17.1652 20.8696 15.5698C20.8923 15.2611 20.6466 15 20.3371 15V15C19.9819 15 19.6609 15.1861 19.3783 15.4013C19.0882 15.6221 18.7441 15.75 18.3751 15.75C17.3396 15.75 16.5001 14.7427 16.5001 13.5C16.5001 12.2574 17.3396 11.25 18.3751 11.25C18.7441 11.25 19.0882 11.378 19.3783 11.5988C19.6609 11.814 19.9819 12 20.3371 12V12C20.7034 12 21.0008 11.703 20.9959 11.3367C20.9713 9.52413 20.8463 7.73572 20.6261 5.97698C18.7403 6.31916 16.816 6.55115 14.8603 6.66605C14.528 6.68557 14.25 6.41979 14.25 6.08694V6.08694Z"
      stroke={color}
      stroke-width={strokeWidth}
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  {:else if variation === 'mini'}
    <path
      d="M12 4.46691C12 4.06159 12.2623 3.71616 12.5588 3.43985C12.8348 3.18269 13 2.85581 13 2.5C13 1.67157 12.1046 1 11 1C9.89543 1 9 1.67157 9 2.5C9 2.862 9.17098 3.19406 9.45568 3.45321C9.74658 3.718 10 4.05386 10 4.44722C10 5.00695 9.53506 5.45596 8.97644 5.42075C7.96056 5.35672 6.95522 5.2543 5.96183 5.11495C5.72871 5.08224 5.49377 5.16089 5.32731 5.32734C5.16086 5.4938 5.08221 5.72874 5.11492 5.96186C5.25427 6.95525 5.35669 7.96058 5.42072 8.97646C5.45593 9.53507 5.00693 10 4.44721 10C4.05385 10 3.718 9.74658 3.45322 9.45569C3.19406 9.17099 2.86201 9 2.5 9C1.67157 9 1 9.89543 1 11C1 12.1046 1.67157 13 2.5 13C2.85582 13 3.1827 12.8348 3.43986 12.5588C3.71616 12.2623 4.06159 12 4.4669 12C5.03368 12 5.4925 12.4633 5.47094 13.0297C5.42294 14.2907 5.31585 15.5363 5.1524 16.764C5.09796 17.1729 5.38386 17.5489 5.79236 17.6058C6.84158 17.752 7.90341 17.8584 8.97626 17.9236C9.53523 17.9576 10 17.5082 10 16.9481C10 16.5542 9.74616 16.2179 9.45499 15.9526C9.17071 15.6935 9 15.3617 9 15C9 14.1716 9.89543 13.5 11 13.5C12.1046 13.5 13 14.1716 13 15C13 15.3557 12.8349 15.6826 12.559 15.9397C12.2624 16.2161 12 16.5617 12 16.9671C12 17.5339 12.4632 17.9928 13.0296 17.972C14.3674 17.9229 15.689 17.8097 16.9915 17.6354C17.3267 17.5905 17.5905 17.3268 17.6353 16.9915C17.8097 15.6891 17.9229 14.3674 17.972 13.0296C17.9928 12.4632 17.5339 12 16.9671 12C16.5617 12 16.2161 12.2624 15.9397 12.559C15.6826 12.8349 15.3557 13 15 13C14.1716 13 13.5 12.1046 13.5 11C13.5 9.89543 14.1716 9 15 9C15.3617 9 15.6935 9.17071 15.9526 9.455C16.2179 9.74617 16.5542 10 16.9481 10C17.5081 10 17.9575 9.53524 17.9236 8.97628C17.8584 7.90343 17.752 6.84161 17.6058 5.79239C17.5489 5.38389 17.1728 5.09799 16.764 5.15243C15.5363 5.31588 14.2907 5.42297 13.0297 5.47097C12.4633 5.49253 12 5.0337 12 4.46691Z"
      fill={color}
    />
  {:else if variation === 'micro'}
    <path
      d="M9 3.88901C9 3.61619 9.18823 3.38689 9.41748 3.23898C9.77185 3.01035 10 2.65238 10 2.25C10 1.55964 9.32843 1 8.5 1C7.67157 1 7 1.55964 7 2.25C7 2.6599 7.23676 3.02372 7.60253 3.25167C7.82216 3.38855 8 3.60655 8 3.86534C8 4.19628 7.72506 4.46143 7.39458 4.44385C6.65084 4.40431 5.9127 4.34393 5.18072 4.2633C4.9575 4.23871 4.735 4.31545 4.57439 4.47242C4.41378 4.62939 4.33197 4.85007 4.35143 5.0738C4.41795 5.83834 4.46242 6.60928 4.48419 7.38597C4.49366 7.72377 4.22043 8 3.88249 8C3.61353 8 3.38734 7.81465 3.24251 7.58801C3.01404 7.23051 2.65445 7 2.25 7C1.55964 7 1 7.67157 1 8.5C1 9.32843 1.55964 10 2.25 10C2.65445 10 3.01404 9.76949 3.24252 9.41198C3.38734 9.18535 3.61353 9 3.88249 9C4.22042 9 4.49365 9.27623 4.48418 9.61403C4.45298 10.7263 4.37523 11.8268 4.25283 12.9137C4.20647 13.3252 4.50253 13.6965 4.91411 13.7429C5.74018 13.836 6.57371 13.9042 7.41391 13.9469C7.73398 13.9631 8 13.7063 8 13.3858C8 13.1149 7.8132 12.8871 7.58525 12.7407C7.22932 12.5122 7 12.1534 7 11.75C7 11.0596 7.67157 10.5 8.5 10.5C9.32843 10.5 10 11.0596 10 11.75C10 12.1534 9.77068 12.5122 9.41475 12.7407C9.1868 12.8871 9 13.1149 9 13.3858V13.4969C9 13.7739 9.22278 13.9997 9.49979 13.9997C10.6964 13.9997 11.881 13.9478 13.0515 13.8461C13.4066 13.8152 13.6909 13.5388 13.7317 13.1847C13.8672 12.0079 13.9524 10.8159 13.9848 9.61088C13.9939 9.27476 13.722 9 13.3858 9C13.1149 9 12.8871 9.1868 12.7407 9.41475C12.5122 9.77068 12.1534 10 11.75 10C11.0596 10 10.5 9.32843 10.5 8.5C10.5 7.67157 11.0596 7 11.75 7C12.1534 7 12.5122 7.22932 12.7407 7.58525C12.8871 7.8132 13.1149 8 13.3858 8C13.722 8 13.9939 7.72524 13.9848 7.38912C13.9635 6.59519 13.9192 5.80688 13.8528 5.02484C13.8359 4.82601 13.7404 4.64211 13.5876 4.51384C13.4347 4.38556 13.237 4.3235 13.0383 4.34137C11.873 4.44614 10.6927 4.49968 9.49979 4.49968C9.22274 4.49968 9 4.27379 9 3.99675V3.88901Z"
      fill={color}
    />
  {:else}
    <path
      d="M11.25 5.33694C11.25 4.98178 11.064 4.66076 10.8488 4.3782C10.6279 4.0881 10.5 3.744 10.5 3.375C10.5 2.33947 11.5074 1.5 12.75 1.5C13.9926 1.5 15 2.33947 15 3.375C15 3.744 14.8721 4.0881 14.6512 4.3782C14.436 4.66076 14.25 4.98178 14.25 5.33694C14.25 5.66929 14.5277 5.9346 14.8595 5.9148C16.7701 5.80079 18.6498 5.57328 20.4922 5.23898C20.6949 5.20219 20.9039 5.25044 21.07 5.37241C21.2361 5.49437 21.3447 5.6793 21.3703 5.88377C21.5943 7.67324 21.7213 9.49263 21.7459 11.3365C21.7508 11.7028 21.4533 11.9999 21.0869 12C20.7318 12 20.4108 11.814 20.1282 11.5988C19.8381 11.3779 19.494 11.25 19.125 11.25C18.0895 11.25 17.25 12.2574 17.25 13.5C17.25 14.7426 18.0895 15.75 19.125 15.75C19.494 15.75 19.8381 15.6221 20.1282 15.4012C20.4108 15.186 20.7318 15 21.0869 15C21.3974 15 21.6439 15.2617 21.6214 15.5713C21.5028 17.2098 21.3031 18.8261 21.0263 20.4161C20.9721 20.728 20.7279 20.9721 20.416 21.0264C18.5969 21.343 16.7434 21.5587 14.8615 21.6677C14.5285 21.6869 14.25 21.4205 14.25 21.0869C14.25 20.7318 14.436 20.4108 14.6512 20.1282C14.8721 19.8381 15 19.494 15 19.125C15 18.0895 13.9926 17.25 12.75 17.25C11.5074 17.25 10.5 18.0895 10.5 19.125C10.5 19.494 10.6279 19.8381 10.8488 20.1282C11.064 20.4108 11.25 20.7318 11.25 21.0869C11.25 21.4485 10.954 21.7405 10.5925 21.7303C9.00303 21.6852 7.43238 21.564 5.88413 21.3702C5.67966 21.3446 5.49473 21.236 5.37277 21.0699C5.25081 20.9038 5.20256 20.6948 5.23935 20.4921C5.53223 18.8781 5.74315 17.2354 5.8676 15.5683C5.89058 15.2605 5.64563 15 5.33694 15C4.98178 15 4.66076 15.186 4.3782 15.4012C4.0881 15.6221 3.744 15.75 3.375 15.75C2.33947 15.75 1.5 14.7426 1.5 13.5C1.5 12.2574 2.33947 11.25 3.375 11.25C3.744 11.25 4.0881 11.3779 4.3782 11.5988C4.66076 11.814 4.98178 12 5.33694 12C5.7033 12 6.00078 11.703 5.99574 11.3367C5.97334 9.70845 5.86862 8.10026 5.68559 6.51628C5.6593 6.28881 5.73838 6.06178 5.9003 5.89986C6.06222 5.73794 6.28924 5.65886 6.51672 5.68515C7.85902 5.84025 9.2186 5.93912 10.5931 5.97931C10.9541 5.98987 11.25 5.69817 11.25 5.33694Z"
      fill={color}
    />
  {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || 'outline'
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop ariaLabel = 'puzzle piece'
@prop ...restProps
-->
