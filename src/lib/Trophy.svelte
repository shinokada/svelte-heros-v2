<script lang="ts">
  import { getContext } from 'svelte';

  type TitleType = {
    id?: string;
    title?: string;
  };
  
  type DescType = {
    id?: string;
    desc?: string;
  };
  
  interface BaseProps {
    size?: string;
    role?: string;
    color?: string;
    variation?: "solid" | "outline" | "mini" | "micro";
    strokeWidth?: string;
    withEvents?: boolean;
    onclick?: (event: MouseEvent) => void;
    onkeydown?: (event: KeyboardEvent) => void;
    onkeyup?: (event: KeyboardEvent) => void;
    class?: string;
  }
  
  interface CtxType extends BaseProps {}
  
  interface Props extends BaseProps{
    title?: TitleType;
    desc?: DescType;
    ariaLabel?: string;
  }
  
  const ctx: CtxType = getContext('iconCtx') ?? {};

  let { 
    size = ctx.size || '24', 
    role = ctx.role || 'img', 
    color = ctx.color || 'currentColor', 
    variation = ctx.variation || "outline",
    strokeWidth = ctx.strokeWidth || '1.5',
    withEvents = ctx.withEvents || false, 
    title = {}, 
    desc = {}, 
    class: classname, 
    ariaLabel = "trophy", 
    onclick, 
    onkeydown, 
    onkeyup,
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = `${title.id || ''} ${desc.id || ''}`;
  const hasDescription = $derived(!!(title.id || desc.id));
  let viewBox: string = $state(''); 

  $effect(() => {
    if (variation === 'mini') {
      size = size || "20";
      viewBox = '0 0 20 20';
    } else if (variation === 'micro'){
      size = size || "16";
      viewBox = '0 0 16 16';
    } else {
      size = size || "24";
      viewBox = '0 0 24 24';
    }
  })
  
</script>

{#if withEvents}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    {...restProps}
    {role}
    width={size}
    height={size}
    class={classname}
    fill="none"
    aria-label={ariaLabel}
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    {viewBox}
    stroke-width={strokeWidth}
    onclick={onclick}
    onkeydown={onkeydown}
    onkeyup={onkeyup}
  >
    {#if title.id && title.title}
      <title id="{title.id}">{title.title}</title>
    {/if}
    {#if desc.id && desc.desc}
      <desc id="{desc.id}">{desc.desc}</desc>
    {/if}
      {#if variation === 'outline'}
        <path d="M16.5003 18.75H7.50026M16.5003 18.75C18.1571 18.75 19.5003 20.0931 19.5003 21.75H4.50026C4.50026 20.0931 5.8434 18.75 7.50026 18.75M16.5003 18.75V15.375C16.5003 14.7537 15.9966 14.25 15.3753 14.25H14.5036M7.50026 18.75V15.375C7.50026 14.7537 8.00394 14.25 8.62526 14.25H9.49689M14.5036 14.25H9.49689M14.5036 14.25C13.9563 13.3038 13.6097 12.227 13.5222 11.0777M9.49689 14.25C10.0442 13.3038 10.3908 12.227 10.4783 11.0777M5.25026 4.23636C4.26796 4.3792 3.29561 4.55275 2.33423 4.75601C2.78454 7.42349 4.99518 9.49282 7.72991 9.72775M5.25026 4.23636V4.5C5.25026 6.60778 6.21636 8.48992 7.72991 9.72775M5.25026 4.23636V2.72089C7.45568 2.41051 9.70922 2.25 12.0003 2.25C14.2913 2.25 16.5448 2.41051 18.7503 2.72089V4.23636M7.72991 9.72775C8.51748 10.3719 9.45329 10.8415 10.4783 11.0777M18.7503 4.23636V4.5C18.7503 6.60778 17.7842 8.48992 16.2706 9.72775M18.7503 4.23636C19.7326 4.3792 20.7049 4.55275 21.6663 4.75601C21.216 7.42349 19.0053 9.49282 16.2706 9.72775M16.2706 9.72775C15.483 10.3719 14.5472 10.8415 13.5222 11.0777M13.5222 11.0777C13.0331 11.1904 12.5236 11.25 12.0003 11.25C11.4769 11.25 10.9675 11.1904 10.4783 11.0777" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
      {:else if variation === 'mini'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10 1C8.17155 1 6.37729 1.14878 4.62882 1.43504C4.26621 1.4944 4 1.80774 4 2.17518V2.56172C3.17339 2.71855 2.35799 2.90717 1.55514 3.12628C1.23821 3.21277 1.01446 3.49546 1.00306 3.82378C1.00102 3.88231 1 3.94105 1 4C1 6.59485 2.97645 8.72783 5.50636 8.97591C6.27572 9.84484 7.29439 10.4898 8.45156 10.7981C8.35539 11.5844 8.11892 12.3268 7.76796 13H7.5C6.67157 13 6 13.6716 6 14.5V17H5.25C4.55964 17 4 17.5596 4 18.25C4 18.6642 4.33579 19 4.75 19H15.25C15.6642 19 16 18.6642 16 18.25C16 17.5596 15.4404 17 14.75 17H14V14.5C14 13.6716 13.3284 13 12.5 13H12.232C11.8811 12.3268 11.6446 11.5844 11.5484 10.7981C12.7056 10.4898 13.7243 9.84484 14.4936 8.97591C17.0235 8.72783 19 6.59485 19 4C19 3.94103 18.999 3.88229 18.9969 3.82378C18.9855 3.49546 18.7618 3.21277 18.4449 3.12628C17.642 2.90717 16.8266 2.71855 16 2.56172V2.17518C16 1.80774 15.7338 1.4944 15.3712 1.43504C13.6227 1.14878 11.8285 1 10 1ZM2.52524 4.42244C3.01226 4.29976 3.50395 4.18878 4 4.08984V5C4 5.73949 4.13404 6.44825 4.37906 7.10288C3.38067 6.58021 2.66567 5.58968 2.52524 4.42244ZM17.4748 4.42244C17.3343 5.58968 16.6193 6.58021 15.6209 7.10288C15.866 6.44825 16 5.73949 16 5V4.08984C16.496 4.18878 16.9877 4.29976 17.4748 4.42244Z" fill="{color}"/> 
      {:else if variation === 'micro'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.6891C12 1.43688 11.8122 1.22372 11.5615 1.19596C10.3922 1.06648 9.20386 1 8 1C6.79614 1 5.60781 1.06648 4.43848 1.19596C4.1878 1.22372 4 1.43688 4 1.6891V2.25577C3.18894 2.36028 2.38761 2.49614 1.59726 2.66213C1.25751 2.73349 1.01113 3.02869 1.00169 3.37573C1.00057 3.41703 1 3.45846 1 3.5C1 5.93557 2.93493 7.91922 5.35145 7.99759C5.8171 8.40933 6.37941 8.71425 7 8.87398V10H6C5.44772 10 5 10.4477 5 11V13H4.33333C3.59695 13 3 13.597 3 14.3333C3 14.7015 3.29848 15 3.66667 15H12.3333C12.7015 15 13 14.7015 13 14.3333C13 13.597 12.403 13 11.6667 13H11V11C11 10.4477 10.5523 10 10 10H9V8.87398C9.62059 8.71425 10.1829 8.40933 10.6485 7.99759C13.0651 7.91922 15 5.93557 15 3.5C15 3.45846 14.9994 3.41703 14.9983 3.37573C14.9889 3.02869 14.7425 2.73349 14.4027 2.66213C13.6124 2.49614 12.8111 2.36028 12 2.25577V1.6891ZM4 3.76881C3.51008 3.8352 3.02401 3.91362 2.54211 4.00375C2.7054 4.96951 3.33019 5.77837 4.18174 6.1956C4.06365 5.81806 4 5.41646 4 5V3.76881ZM12 3.76881C12.4899 3.8352 12.976 3.91362 13.4579 4.00375C13.2946 4.96951 12.6698 5.77837 11.8183 6.1956C11.9364 5.81806 12 5.41646 12 5V3.76881Z" fill="{color}"/> 
      {:else}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.16613 2.62136V3.4786C4.13126 3.62665 3.10716 3.80823 2.09497 4.02223C1.70145 4.10543 1.44361 4.48425 1.51057 4.88086C2.02102 7.90456 4.54015 10.2449 7.64915 10.4805C8.4348 11.1221 9.36855 11.5907 10.3916 11.827C10.2927 12.9952 9.8965 14.0776 9.2788 15H8.54088C7.50534 15 6.66588 15.8395 6.66588 16.875V19.5H5.91577C4.67313 19.5 3.66577 20.5074 3.66577 21.75C3.66577 22.1642 4.00156 22.5 4.41577 22.5H19.4158C19.83 22.5 20.1658 22.1642 20.1658 21.75C20.1658 20.5074 19.1584 19.5 17.9158 19.5H17.1659V16.875C17.1659 15.8395 16.3264 15 15.2909 15H14.5524C13.9349 14.0777 13.5389 12.9953 13.4402 11.8271C14.4634 11.5908 15.3973 11.1222 16.1831 10.4805C19.2921 10.2449 21.8113 7.90456 22.3217 4.88086C22.3887 4.48425 22.1308 4.10543 21.7373 4.02223C20.7251 3.80823 19.701 3.62665 18.6661 3.4786V2.62136C18.6661 2.24303 18.3844 1.92394 18.0089 1.87713C16.0127 1.62819 13.9792 1.5 11.9161 1.5C9.85307 1.5 7.81961 1.62819 5.82333 1.87713C5.44791 1.92394 5.16613 2.24303 5.16613 2.62136ZM5.16613 5.25C5.16613 6.44618 5.47762 7.56995 6.02338 8.54424C4.66626 7.9367 3.61376 6.76975 3.16003 5.33687C3.8237 5.20825 4.49252 5.09398 5.16613 4.99438V5.25ZM18.6661 5.25V4.99438C19.3398 5.09398 20.0086 5.20825 20.6722 5.33688C20.2185 6.76975 19.166 7.9367 17.8089 8.54424C18.3547 7.56995 18.6661 6.44618 18.6661 5.25Z" fill="{color}"/> 
      {/if}
  </svg>
{:else}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    {...restProps}
    {role}
    width={size}
    height={size}
    class={classname}
    fill="none"
    aria-label={ariaLabel}
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    {viewBox}
    stroke-width={strokeWidth}
  >
    {#if title.id && title.title}
      <title id="{title.id}">{title.title}</title>
    {/if}
    {#if desc.id && desc.desc}
      <desc id="{desc.id}">{desc.desc}</desc>
    {/if}
      {#if variation === 'outline'}
        <path d="M16.5003 18.75H7.50026M16.5003 18.75C18.1571 18.75 19.5003 20.0931 19.5003 21.75H4.50026C4.50026 20.0931 5.8434 18.75 7.50026 18.75M16.5003 18.75V15.375C16.5003 14.7537 15.9966 14.25 15.3753 14.25H14.5036M7.50026 18.75V15.375C7.50026 14.7537 8.00394 14.25 8.62526 14.25H9.49689M14.5036 14.25H9.49689M14.5036 14.25C13.9563 13.3038 13.6097 12.227 13.5222 11.0777M9.49689 14.25C10.0442 13.3038 10.3908 12.227 10.4783 11.0777M5.25026 4.23636C4.26796 4.3792 3.29561 4.55275 2.33423 4.75601C2.78454 7.42349 4.99518 9.49282 7.72991 9.72775M5.25026 4.23636V4.5C5.25026 6.60778 6.21636 8.48992 7.72991 9.72775M5.25026 4.23636V2.72089C7.45568 2.41051 9.70922 2.25 12.0003 2.25C14.2913 2.25 16.5448 2.41051 18.7503 2.72089V4.23636M7.72991 9.72775C8.51748 10.3719 9.45329 10.8415 10.4783 11.0777M18.7503 4.23636V4.5C18.7503 6.60778 17.7842 8.48992 16.2706 9.72775M18.7503 4.23636C19.7326 4.3792 20.7049 4.55275 21.6663 4.75601C21.216 7.42349 19.0053 9.49282 16.2706 9.72775M16.2706 9.72775C15.483 10.3719 14.5472 10.8415 13.5222 11.0777M13.5222 11.0777C13.0331 11.1904 12.5236 11.25 12.0003 11.25C11.4769 11.25 10.9675 11.1904 10.4783 11.0777" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
      {:else if variation === 'mini'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10 1C8.17155 1 6.37729 1.14878 4.62882 1.43504C4.26621 1.4944 4 1.80774 4 2.17518V2.56172C3.17339 2.71855 2.35799 2.90717 1.55514 3.12628C1.23821 3.21277 1.01446 3.49546 1.00306 3.82378C1.00102 3.88231 1 3.94105 1 4C1 6.59485 2.97645 8.72783 5.50636 8.97591C6.27572 9.84484 7.29439 10.4898 8.45156 10.7981C8.35539 11.5844 8.11892 12.3268 7.76796 13H7.5C6.67157 13 6 13.6716 6 14.5V17H5.25C4.55964 17 4 17.5596 4 18.25C4 18.6642 4.33579 19 4.75 19H15.25C15.6642 19 16 18.6642 16 18.25C16 17.5596 15.4404 17 14.75 17H14V14.5C14 13.6716 13.3284 13 12.5 13H12.232C11.8811 12.3268 11.6446 11.5844 11.5484 10.7981C12.7056 10.4898 13.7243 9.84484 14.4936 8.97591C17.0235 8.72783 19 6.59485 19 4C19 3.94103 18.999 3.88229 18.9969 3.82378C18.9855 3.49546 18.7618 3.21277 18.4449 3.12628C17.642 2.90717 16.8266 2.71855 16 2.56172V2.17518C16 1.80774 15.7338 1.4944 15.3712 1.43504C13.6227 1.14878 11.8285 1 10 1ZM2.52524 4.42244C3.01226 4.29976 3.50395 4.18878 4 4.08984V5C4 5.73949 4.13404 6.44825 4.37906 7.10288C3.38067 6.58021 2.66567 5.58968 2.52524 4.42244ZM17.4748 4.42244C17.3343 5.58968 16.6193 6.58021 15.6209 7.10288C15.866 6.44825 16 5.73949 16 5V4.08984C16.496 4.18878 16.9877 4.29976 17.4748 4.42244Z" fill="{color}"/> 
      {:else if variation === 'micro'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.6891C12 1.43688 11.8122 1.22372 11.5615 1.19596C10.3922 1.06648 9.20386 1 8 1C6.79614 1 5.60781 1.06648 4.43848 1.19596C4.1878 1.22372 4 1.43688 4 1.6891V2.25577C3.18894 2.36028 2.38761 2.49614 1.59726 2.66213C1.25751 2.73349 1.01113 3.02869 1.00169 3.37573C1.00057 3.41703 1 3.45846 1 3.5C1 5.93557 2.93493 7.91922 5.35145 7.99759C5.8171 8.40933 6.37941 8.71425 7 8.87398V10H6C5.44772 10 5 10.4477 5 11V13H4.33333C3.59695 13 3 13.597 3 14.3333C3 14.7015 3.29848 15 3.66667 15H12.3333C12.7015 15 13 14.7015 13 14.3333C13 13.597 12.403 13 11.6667 13H11V11C11 10.4477 10.5523 10 10 10H9V8.87398C9.62059 8.71425 10.1829 8.40933 10.6485 7.99759C13.0651 7.91922 15 5.93557 15 3.5C15 3.45846 14.9994 3.41703 14.9983 3.37573C14.9889 3.02869 14.7425 2.73349 14.4027 2.66213C13.6124 2.49614 12.8111 2.36028 12 2.25577V1.6891ZM4 3.76881C3.51008 3.8352 3.02401 3.91362 2.54211 4.00375C2.7054 4.96951 3.33019 5.77837 4.18174 6.1956C4.06365 5.81806 4 5.41646 4 5V3.76881ZM12 3.76881C12.4899 3.8352 12.976 3.91362 13.4579 4.00375C13.2946 4.96951 12.6698 5.77837 11.8183 6.1956C11.9364 5.81806 12 5.41646 12 5V3.76881Z" fill="{color}"/> 
      {:else}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.16613 2.62136V3.4786C4.13126 3.62665 3.10716 3.80823 2.09497 4.02223C1.70145 4.10543 1.44361 4.48425 1.51057 4.88086C2.02102 7.90456 4.54015 10.2449 7.64915 10.4805C8.4348 11.1221 9.36855 11.5907 10.3916 11.827C10.2927 12.9952 9.8965 14.0776 9.2788 15H8.54088C7.50534 15 6.66588 15.8395 6.66588 16.875V19.5H5.91577C4.67313 19.5 3.66577 20.5074 3.66577 21.75C3.66577 22.1642 4.00156 22.5 4.41577 22.5H19.4158C19.83 22.5 20.1658 22.1642 20.1658 21.75C20.1658 20.5074 19.1584 19.5 17.9158 19.5H17.1659V16.875C17.1659 15.8395 16.3264 15 15.2909 15H14.5524C13.9349 14.0777 13.5389 12.9953 13.4402 11.8271C14.4634 11.5908 15.3973 11.1222 16.1831 10.4805C19.2921 10.2449 21.8113 7.90456 22.3217 4.88086C22.3887 4.48425 22.1308 4.10543 21.7373 4.02223C20.7251 3.80823 19.701 3.62665 18.6661 3.4786V2.62136C18.6661 2.24303 18.3844 1.92394 18.0089 1.87713C16.0127 1.62819 13.9792 1.5 11.9161 1.5C9.85307 1.5 7.81961 1.62819 5.82333 1.87713C5.44791 1.92394 5.16613 2.24303 5.16613 2.62136ZM5.16613 5.25C5.16613 6.44618 5.47762 7.56995 6.02338 8.54424C4.66626 7.9367 3.61376 6.76975 3.16003 5.33687C3.8237 5.20825 4.49252 5.09398 5.16613 4.99438V5.25ZM18.6661 5.25V4.99438C19.3398 5.09398 20.0086 5.20825 20.6722 5.33688C20.2185 6.76975 19.166 7.9367 17.8089 8.54424C18.3547 7.56995 18.6661 6.44618 18.6661 5.25Z" fill="{color}"/> 
      {/if}
  </svg>
{/if}


