<script lang="ts">
  import { getContext } from 'svelte';

  type TitleType = {
    id?: string;
    title?: string;
  };
  
  type DescType = {
    id?: string;
    desc?: string;
  };
  
  interface BaseProps {
    size?: string;
    role?: string;
    color?: string;
    variation?: "solid" | "outline" | "mini" | "micro";
    strokeWidth?: string;
    withEvents?: boolean;
    onclick?: (event: MouseEvent) => void;
    onkeydown?: (event: KeyboardEvent) => void;
    onkeyup?: (event: KeyboardEvent) => void;
    class?: string;
  }
  
  interface CtxType extends BaseProps {}
  
  interface Props extends BaseProps{
    title?: TitleType;
    desc?: DescType;
    ariaLabel?: string;
  }
  
  const ctx: CtxType = getContext('iconCtx') ?? {};

  let { 
    size = ctx.size || '24', 
    role = ctx.role || 'img', 
    color = ctx.color || 'currentColor', 
    variation = ctx.variation || "outline",
    strokeWidth = ctx.strokeWidth || '1.5',
    withEvents = ctx.withEvents || false, 
    title, 
    desc, 
    class: classname, 
    ariaLabel = "beaker", 
    onclick, 
    onkeydown, 
    onkeyup,
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));
  let viewBox: string = $state(''); 

  $effect(() => {
    if (variation === 'mini') {
      size = size || "20";
      viewBox = '0 0 20 20';
    } else if (variation === 'micro'){
      size = size || "16";
      viewBox = '0 0 16 16';
    } else {
      size = size || "24";
      viewBox = '0 0 24 24';
    }
  })
  
</script>

{#if withEvents}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    {...restProps}
    {role}
    width={size}
    height={size}
    class={classname}
    fill="none"
    aria-label={ariaLabel}
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    {viewBox}
    stroke-width={strokeWidth}
    onclick={onclick}
    onkeydown={onkeydown}
    onkeyup={onkeyup}
  >
    {#if title?.id && title.title}
      <title id="{title.id}">{title.title}</title>
    {/if}
    {#if desc?.id && desc.desc}
      <desc id="{desc.id}">{desc.desc}</desc>
    {/if}
      {#if variation === 'outline'}
        <path d="M9.75001 3.10408V8.81802C9.75001 9.41476 9.51295 9.98705 9.091 10.409L5.00001 14.5M9.75001 3.10408C9.49886 3.12743 9.24884 3.15465 9.00001 3.18568M9.75001 3.10408C10.4908 3.03521 11.2413 3 12 3C12.7587 3 13.5093 3.03521 14.25 3.10408M14.25 3.10408V8.81802C14.25 9.41476 14.4871 9.98705 14.909 10.409L19.8 15.3M14.25 3.10408C14.5011 3.12743 14.7512 3.15465 15 3.18568M19.8 15.3L18.2299 15.6925C16.1457 16.2136 13.9216 15.9608 12 15C10.0784 14.0392 7.85435 13.7864 5.7701 14.3075L5.00001 14.5M19.8 15.3L21.2022 16.7022C22.4341 17.9341 21.8527 20.0202 20.1354 20.3134C17.4911 20.7649 14.773 21 12 21C9.227 21 6.50891 20.7649 3.86459 20.3134C2.14728 20.0202 1.56591 17.9341 2.7978 16.7022L5.00001 14.5" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
      {:else if variation === 'mini'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.49999 3.52795V8.17157C8.49999 8.90092 8.21026 9.60039 7.69453 10.1161L6.47812 11.3325C7.68604 11.2911 8.89515 11.5003 10.0275 11.9532L10.5296 12.1541C11.8561 12.6847 13.3098 12.8115 14.708 12.5187L12.3054 10.1161C11.7897 9.60039 11.5 8.90092 11.5 8.17157V3.52795C11.0023 3.50937 10.5023 3.5 9.99999 3.5C9.49771 3.5 8.99766 3.50937 8.49999 3.52795ZM13 3.61218C13.0635 3.61695 13.1269 3.62186 13.1903 3.62693C13.6032 3.65992 13.9646 3.35194 13.9976 2.93905C14.0306 2.52615 13.7226 2.16468 13.3097 2.13169C12.9714 2.10466 12.6319 2.08173 12.2913 2.06296C11.5327 2.02117 10.7688 2 9.99999 2C9.23118 2 8.46724 2.02117 7.70873 2.06296C7.36812 2.08173 7.02862 2.10466 6.69025 2.13169C6.27736 2.16468 5.96938 2.52615 6.00237 2.93905C6.03536 3.35194 6.39683 3.65992 6.80973 3.62693C6.8731 3.62186 6.93653 3.61695 6.99999 3.61218V8.17157C6.99999 8.50309 6.86829 8.82104 6.63387 9.05546L2.60034 13.089C1.10385 14.5855 1.78334 17.2391 4.00336 17.5645C5.9611 17.8515 7.96343 18 9.99999 18C12.0366 18 14.0389 17.8515 15.9966 17.5645C18.2166 17.2391 18.8961 14.5855 17.3996 13.089L13.3661 9.05546C13.1317 8.82104 13 8.50309 13 8.17157V3.61218Z" fill="{color}"/> 
      {:else if variation === 'micro'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M11 3.5V5.75736C11 6.3541 11.2371 6.92639 11.659 7.34835L14.3916 10.0809C14.7812 10.4705 15 10.9988 15 11.5498C15 12.5352 14.3015 13.4103 13.2976 13.5736C11.5728 13.8542 9.80313 14 8 14C6.19687 14 4.42725 13.8542 2.70242 13.5736C1.69854 13.4103 1 12.5352 1 11.5498C1 10.9988 1.21885 10.4705 1.6084 10.0809L4.34099 7.34835C4.76295 6.92639 5 6.3541 5 5.75736V3.5H4.75C4.33579 3.5 4 3.16421 4 2.75C4 2.33579 4.33579 2 4.75 2H11.25C11.6642 2 12 2.33579 12 2.75C12 3.16421 11.6642 3.5 11.25 3.5H11ZM6.5 5.75736V3.5H9.5V5.75736C9.5 6.75192 9.89509 7.70575 10.5983 8.40901L10.7562 8.56685C10.7312 8.57785 10.7062 8.58922 10.6812 8.60096C10.2573 8.80044 9.76537 8.79458 9.34634 8.58507L8.15576 7.98978C7.50358 7.66369 6.79678 7.49016 6.08618 7.4698C6.35566 6.94476 6.5 6.3585 6.5 5.75736Z" fill="{color}"/> 
      {:else}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 3.79758V8.81802C10.5 9.61367 10.1839 10.3767 9.62131 10.9393L7.24427 13.3164C8.99161 13.192 10.7578 13.5404 12.3354 14.3292C14.0988 15.2109 16.1395 15.442 18.048 14.9649L18.333 14.8937L14.3787 10.9393C13.8161 10.3767 13.5 9.61367 13.5 8.81802V3.79758C13.0041 3.76602 12.504 3.75 12 3.75C11.496 3.75 10.9958 3.76602 10.5 3.79758ZM15 3.93576C15.3732 3.93623 15.6969 3.65833 15.7442 3.27849C15.7955 2.86746 15.5038 2.4927 15.0928 2.44144C14.8362 2.40945 14.5784 2.38138 14.3194 2.3573C13.5556 2.28628 12.7819 2.25 12 2.25C11.218 2.25 10.4444 2.28628 9.68055 2.3573C9.4216 2.38138 9.16378 2.40945 8.90718 2.44144C8.49615 2.4927 8.2045 2.86746 8.25575 3.27849C8.30312 3.65833 8.62676 3.93623 8.99999 3.93576V8.81802C8.99999 9.21584 8.84195 9.59737 8.56065 9.87868L2.26745 16.1719C0.646313 17.793 1.36446 20.6474 3.73836 21.0527C6.42419 21.5112 9.1845 21.75 12 21.75C14.8155 21.75 17.5758 21.5112 20.2616 21.0527C22.6355 20.6474 23.3537 17.793 21.7325 16.1719L15.4393 9.87868C15.158 9.59737 15 9.21584 15 8.81802V3.93576Z" fill="{color}"/> 
      {/if}
  </svg>
{:else}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    {...restProps}
    {role}
    width={size}
    height={size}
    class={classname}
    fill="none"
    aria-label={ariaLabel}
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    {viewBox}
    stroke-width={strokeWidth}
  >
    {#if title?.id && title.title}
      <title id="{title.id}">{title.title}</title>
    {/if}
    {#if desc?.id && desc.desc}
      <desc id="{desc.id}">{desc.desc}</desc>
    {/if}
      {#if variation === 'outline'}
        <path d="M9.75001 3.10408V8.81802C9.75001 9.41476 9.51295 9.98705 9.091 10.409L5.00001 14.5M9.75001 3.10408C9.49886 3.12743 9.24884 3.15465 9.00001 3.18568M9.75001 3.10408C10.4908 3.03521 11.2413 3 12 3C12.7587 3 13.5093 3.03521 14.25 3.10408M14.25 3.10408V8.81802C14.25 9.41476 14.4871 9.98705 14.909 10.409L19.8 15.3M14.25 3.10408C14.5011 3.12743 14.7512 3.15465 15 3.18568M19.8 15.3L18.2299 15.6925C16.1457 16.2136 13.9216 15.9608 12 15C10.0784 14.0392 7.85435 13.7864 5.7701 14.3075L5.00001 14.5M19.8 15.3L21.2022 16.7022C22.4341 17.9341 21.8527 20.0202 20.1354 20.3134C17.4911 20.7649 14.773 21 12 21C9.227 21 6.50891 20.7649 3.86459 20.3134C2.14728 20.0202 1.56591 17.9341 2.7978 16.7022L5.00001 14.5" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
      {:else if variation === 'mini'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.49999 3.52795V8.17157C8.49999 8.90092 8.21026 9.60039 7.69453 10.1161L6.47812 11.3325C7.68604 11.2911 8.89515 11.5003 10.0275 11.9532L10.5296 12.1541C11.8561 12.6847 13.3098 12.8115 14.708 12.5187L12.3054 10.1161C11.7897 9.60039 11.5 8.90092 11.5 8.17157V3.52795C11.0023 3.50937 10.5023 3.5 9.99999 3.5C9.49771 3.5 8.99766 3.50937 8.49999 3.52795ZM13 3.61218C13.0635 3.61695 13.1269 3.62186 13.1903 3.62693C13.6032 3.65992 13.9646 3.35194 13.9976 2.93905C14.0306 2.52615 13.7226 2.16468 13.3097 2.13169C12.9714 2.10466 12.6319 2.08173 12.2913 2.06296C11.5327 2.02117 10.7688 2 9.99999 2C9.23118 2 8.46724 2.02117 7.70873 2.06296C7.36812 2.08173 7.02862 2.10466 6.69025 2.13169C6.27736 2.16468 5.96938 2.52615 6.00237 2.93905C6.03536 3.35194 6.39683 3.65992 6.80973 3.62693C6.8731 3.62186 6.93653 3.61695 6.99999 3.61218V8.17157C6.99999 8.50309 6.86829 8.82104 6.63387 9.05546L2.60034 13.089C1.10385 14.5855 1.78334 17.2391 4.00336 17.5645C5.9611 17.8515 7.96343 18 9.99999 18C12.0366 18 14.0389 17.8515 15.9966 17.5645C18.2166 17.2391 18.8961 14.5855 17.3996 13.089L13.3661 9.05546C13.1317 8.82104 13 8.50309 13 8.17157V3.61218Z" fill="{color}"/> 
      {:else if variation === 'micro'}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M11 3.5V5.75736C11 6.3541 11.2371 6.92639 11.659 7.34835L14.3916 10.0809C14.7812 10.4705 15 10.9988 15 11.5498C15 12.5352 14.3015 13.4103 13.2976 13.5736C11.5728 13.8542 9.80313 14 8 14C6.19687 14 4.42725 13.8542 2.70242 13.5736C1.69854 13.4103 1 12.5352 1 11.5498C1 10.9988 1.21885 10.4705 1.6084 10.0809L4.34099 7.34835C4.76295 6.92639 5 6.3541 5 5.75736V3.5H4.75C4.33579 3.5 4 3.16421 4 2.75C4 2.33579 4.33579 2 4.75 2H11.25C11.6642 2 12 2.33579 12 2.75C12 3.16421 11.6642 3.5 11.25 3.5H11ZM6.5 5.75736V3.5H9.5V5.75736C9.5 6.75192 9.89509 7.70575 10.5983 8.40901L10.7562 8.56685C10.7312 8.57785 10.7062 8.58922 10.6812 8.60096C10.2573 8.80044 9.76537 8.79458 9.34634 8.58507L8.15576 7.98978C7.50358 7.66369 6.79678 7.49016 6.08618 7.4698C6.35566 6.94476 6.5 6.3585 6.5 5.75736Z" fill="{color}"/> 
      {:else}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 3.79758V8.81802C10.5 9.61367 10.1839 10.3767 9.62131 10.9393L7.24427 13.3164C8.99161 13.192 10.7578 13.5404 12.3354 14.3292C14.0988 15.2109 16.1395 15.442 18.048 14.9649L18.333 14.8937L14.3787 10.9393C13.8161 10.3767 13.5 9.61367 13.5 8.81802V3.79758C13.0041 3.76602 12.504 3.75 12 3.75C11.496 3.75 10.9958 3.76602 10.5 3.79758ZM15 3.93576C15.3732 3.93623 15.6969 3.65833 15.7442 3.27849C15.7955 2.86746 15.5038 2.4927 15.0928 2.44144C14.8362 2.40945 14.5784 2.38138 14.3194 2.3573C13.5556 2.28628 12.7819 2.25 12 2.25C11.218 2.25 10.4444 2.28628 9.68055 2.3573C9.4216 2.38138 9.16378 2.40945 8.90718 2.44144C8.49615 2.4927 8.2045 2.86746 8.25575 3.27849C8.30312 3.65833 8.62676 3.93623 8.99999 3.93576V8.81802C8.99999 9.21584 8.84195 9.59737 8.56065 9.87868L2.26745 16.1719C0.646313 17.793 1.36446 20.6474 3.73836 21.0527C6.42419 21.5112 9.1845 21.75 12 21.75C14.8155 21.75 17.5758 21.5112 20.2616 21.0527C22.6355 20.6474 23.3537 17.793 21.7325 16.1719L15.4393 9.87868C15.158 9.59737 15 9.21584 15 8.81802V3.93576Z" fill="{color}"/> 
      {/if}
  </svg>
{/if}

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size || '24'
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || "outline"
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop withEvents = ctx.withEvents || false
@prop title
@prop desc
@prop class: classname
@prop ariaLabel = "beaker"
@prop onclick
@prop onkeydown
@prop onkeyup
@prop ...restProps
-->
