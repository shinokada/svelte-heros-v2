<script lang="ts">
  import { getContext } from 'svelte';

  type TitleType = {
    id?: string;
    title?: string;
  };
  
  type DescType = {
    id?: string;
    desc?: string;
  };
  
  interface BaseProps {
    size?: string;
    role?: string;
    color?: string;
    variation?: "solid" | "outline" | "mini" | "micro";
    strokeWidth?: string;
    withEvents?: boolean;
    onclick?: (event: MouseEvent) => void;
    onkeydown?: (event: KeyboardEvent) => void;
    onkeyup?: (event: KeyboardEvent) => void;
    class?: string;
  }
  
  interface CtxType extends BaseProps {}
  
  interface Props extends BaseProps{
    title?: TitleType;
    desc?: DescType;
    ariaLabel?: string;
  }
  
  const ctx: CtxType = getContext('iconCtx') ?? {};

  let { 
    size = ctx.size || '24', 
    role = ctx.role || 'img', 
    color = ctx.color || 'currentColor', 
    variation = ctx.variation || "outline",
    strokeWidth = ctx.strokeWidth || '1.5',
    withEvents = ctx.withEvents || false, 
    title = {}, 
    desc = {}, 
    class: classname, 
    ariaLabel = "cursor arrow rays", 
    onclick, 
    onkeydown, 
    onkeyup,
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = `${title.id || ''} ${desc.id || ''}`;
  const hasDescription = $derived(!!(title.id || desc.id));
  let viewBox: string = $state(''); 

  $effect(() => {
    if (variation === 'mini') {
      size = size || "20";
      viewBox = '0 0 20 20';
    } else if (variation === 'micro'){
      size = size || "16";
      viewBox = '0 0 16 16';
    } else {
      size = size || "24";
      viewBox = '0 0 24 24';
    }
  })
  
</script>

{#if withEvents}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    {...restProps}
    {role}
    width={size}
    height={size}
    class={classname}
    fill="none"
    aria-label={ariaLabel}
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    {viewBox}
    stroke-width={strokeWidth}
    onclick={onclick}
    onkeydown={onkeydown}
    onkeyup={onkeyup}
  >
    {#if title.id && title.title}
      <title id="{title.id}">{title.title}</title>
    {/if}
    {#if desc.id && desc.desc}
      <desc id="{desc.id}">{desc.desc}</desc>
    {/if}
      {#if variation === 'outline'}
        <path d="M15.0423 21.6718L13.6835 16.6007M13.6835 16.6007L11.1741 18.826L11.7425 9.35623L16.9697 17.2731L13.6835 16.6007ZM12 2.25V4.5M17.8336 4.66637L16.2426 6.25736M20.25 10.5H18M7.75736 14.7426L6.16637 16.3336M6 10.5H3.75M7.75736 6.25736L6.16637 4.66637" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
      {:else if variation === 'mini'}
        <path d="M10 1C10.4142 1 10.75 1.33579 10.75 1.75V3.25C10.75 3.66421 10.4142 4 10 4C9.58579 4 9.25 3.66421 9.25 3.25V1.75C9.25 1.33579 9.58579 1 10 1Z" fill="{color}"/> <path d="M5.05025 3.05025C5.34315 2.75736 5.81802 2.75736 6.11091 3.05025L7.17157 4.11091C7.46447 4.40381 7.46447 4.87868 7.17157 5.17157C6.87868 5.46447 6.40381 5.46447 6.11091 5.17157L5.05025 4.11091C4.75736 3.81802 4.75736 3.34315 5.05025 3.05025Z" fill="{color}"/> <path d="M14.9497 3.05025C15.2426 3.34315 15.2426 3.81802 14.9497 4.11091L13.8891 5.17157C13.5962 5.46447 13.1213 5.46447 12.8284 5.17157C12.5355 4.87868 12.5355 4.40381 12.8284 4.11091L13.8891 3.05025C14.182 2.75736 14.6569 2.75736 14.9497 3.05025Z" fill="{color}"/> <path d="M3 8C3 7.58579 3.33579 7.25 3.75 7.25H5.25C5.66421 7.25 6 7.58579 6 8C6 8.41421 5.66421 8.75 5.25 8.75H3.75C3.33579 8.75 3 8.41421 3 8Z" fill="{color}"/> <path d="M14 8C14 7.58579 14.3358 7.25 14.75 7.25H16.25C16.6642 7.25 17 7.58579 17 8C17 8.41421 16.6642 8.75 16.25 8.75H14.75C14.3358 8.75 14 8.41421 14 8Z" fill="{color}"/> <path d="M7.17157 10.8284C7.46447 11.1213 7.46447 11.5962 7.17157 11.8891L6.11091 12.9497C5.81802 13.2426 5.34315 13.2426 5.05025 12.9497C4.75736 12.6569 4.75736 12.182 5.05025 11.8891L6.11091 10.8284C6.40381 10.5355 6.87868 10.5355 7.17157 10.8284Z" fill="{color}"/> <path d="M10.7657 7.51062C10.5871 7.24492 10.2596 7.12184 9.95029 7.20417C9.64094 7.2865 9.41795 7.5561 9.3951 7.8754L8.90409 14.7363C8.88303 15.0306 9.0365 15.3099 9.29622 15.4499C9.55594 15.59 9.87365 15.5647 10.108 15.3854L11.1508 14.5873L12.1363 18.2653C12.2435 18.6654 12.6548 18.9028 13.0549 18.7956C13.455 18.6884 13.6924 18.2771 13.5852 17.877L12.6083 14.2312L13.9005 14.4349C14.1951 14.4814 14.4893 14.3489 14.6497 14.0974C14.81 13.846 14.8062 13.5233 14.6398 13.2758L10.7657 7.51062Z" fill="{color}"/> 
      {:else if variation === 'micro'}
        <path d="M7.25 1.75C7.25 1.33579 7.58579 1 8 1C8.41421 1 8.75 1.33579 8.75 1.75V3.25C8.75 3.66421 8.41421 4 8 4C7.58579 4 7.25 3.66421 7.25 3.25V1.75Z" fill="{color}"/> <path d="M11.5356 2.9038C11.8285 2.61091 12.3034 2.61091 12.5962 2.9038C12.8891 3.1967 12.8891 3.67157 12.5962 3.96446L11.5356 5.02512C11.2427 5.31802 10.7678 5.31802 10.4749 5.02512C10.182 4.73223 10.182 4.25736 10.4749 3.96446L11.5356 2.9038Z" fill="{color}"/> <path d="M14.5 7.5C14.5 7.08579 14.1642 6.75 13.75 6.75H12.25C11.8358 6.75 11.5 7.08579 11.5 7.5C11.5 7.91421 11.8358 8.25 12.25 8.25H13.75C14.1642 8.25 14.5 7.91421 14.5 7.5Z" fill="{color}"/> <path d="M4.46442 9.97488C4.75731 9.68199 5.23219 9.68199 5.52508 9.97488C5.81797 10.2678 5.81797 10.7426 5.52508 11.0355L4.46442 12.0962C4.17153 12.3891 3.69665 12.3891 3.40376 12.0962C3.11087 11.8033 3.11087 11.3284 3.40376 11.0355L4.46442 9.97488Z" fill="{color}"/> <path d="M4.5 7.5C4.5 7.08579 4.16421 6.75 3.75 6.75H2.25C1.83579 6.75 1.5 7.08579 1.5 7.5C1.5 7.91421 1.83579 8.25 2.25 8.25H3.75C4.16421 8.25 4.5 7.91421 4.5 7.5Z" fill="{color}"/> <path d="M5.52509 3.96447C5.81798 4.25736 5.81798 4.73223 5.52509 5.02513C5.2322 5.31802 4.75732 5.31802 4.46443 5.02513L3.40377 3.96447C3.11088 3.67157 3.11088 3.1967 3.40377 2.90381C3.69666 2.61091 4.17154 2.61091 4.46443 2.90381L5.52509 3.96447Z" fill="{color}"/> <path d="M8.77875 7.438C8.59919 7.17468 8.27284 7.05361 7.96499 7.13609C7.65714 7.21858 7.43504 7.48662 7.4112 7.80443L7.01493 13.087C6.99268 13.3835 7.14774 13.6652 7.41019 13.805C7.67265 13.9448 7.99292 13.9164 8.22662 13.7325L8.82888 13.2586L9.11664 14.3332C9.22379 14.7333 9.63501 14.9708 10.0351 14.8636C10.4352 14.7565 10.6727 14.3453 10.5656 13.9451L10.2777 12.8702L11.0366 12.9796C11.3309 13.022 11.6225 12.8865 11.7799 12.6342C11.9373 12.3819 11.9307 12.0604 11.7632 11.8147L8.77875 7.438Z" fill="{color}"/> 
      {:else}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.5C12.4142 1.5 12.75 1.83579 12.75 2.25V4.5C12.75 4.91421 12.4142 5.25 12 5.25C11.5858 5.25 11.25 4.91421 11.25 4.5V2.25C11.25 1.83579 11.5858 1.5 12 1.5ZM5.63604 4.13604C5.92893 3.84315 6.40381 3.84315 6.6967 4.13604L8.28769 5.72703C8.58058 6.01992 8.58058 6.4948 8.28769 6.78769C7.9948 7.08058 7.51992 7.08058 7.22703 6.78769L5.63604 5.1967C5.34315 4.90381 5.34315 4.42893 5.63604 4.13604ZM18.364 4.13604C18.6569 4.42893 18.6569 4.90381 18.364 5.1967L16.773 6.78769C16.4801 7.08058 16.0052 7.08058 15.7123 6.78769C15.4194 6.4948 15.4194 6.01992 15.7123 5.72703L17.3033 4.13604C17.5962 3.84315 18.0711 3.84315 18.364 4.13604ZM11.5484 8.63179C11.8602 8.54824 12.1905 8.67359 12.3684 8.94299L17.5955 16.8599C17.7627 17.113 17.7609 17.4419 17.591 17.6932C17.421 17.9445 17.1165 18.0687 16.8193 18.0079L14.722 17.5787L15.7668 21.4777C15.874 21.8778 15.6365 22.289 15.2364 22.3963C14.8363 22.5035 14.4251 22.266 14.3179 21.8659L13.2732 17.967L11.6717 19.3872C11.4447 19.5884 11.1189 19.6332 10.8461 19.5005C10.5733 19.3678 10.4073 19.0839 10.4254 18.7811L10.9939 9.3113C11.0132 8.98905 11.2366 8.71534 11.5484 8.63179ZM3 10.5C3 10.0858 3.33579 9.75 3.75 9.75H6C6.41421 9.75 6.75 10.0858 6.75 10.5C6.75 10.9142 6.41421 11.25 6 11.25H3.75C3.33579 11.25 3 10.9142 3 10.5ZM17.25 10.5C17.25 10.0858 17.5858 9.75 18 9.75H20.25C20.6642 9.75 21 10.0858 21 10.5C21 10.9142 20.6642 11.25 20.25 11.25H18C17.5858 11.25 17.25 10.9142 17.25 10.5ZM8.28769 14.2123C8.58058 14.5052 8.58058 14.9801 8.28769 15.273L6.6967 16.864C6.40381 17.1569 5.92893 17.1569 5.63604 16.864C5.34315 16.5711 5.34315 16.0962 5.63604 15.8033L7.22703 14.2123C7.51992 13.9194 7.9948 13.9194 8.28769 14.2123Z" fill="{color}"/> 
      {/if}
  </svg>
{:else}
  <svg
    xmlns="http://www.w3.org/2000/svg"
    {...restProps}
    {role}
    width={size}
    height={size}
    class={classname}
    fill="none"
    aria-label={ariaLabel}
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    {viewBox}
    stroke-width={strokeWidth}
  >
    {#if title.id && title.title}
      <title id="{title.id}">{title.title}</title>
    {/if}
    {#if desc.id && desc.desc}
      <desc id="{desc.id}">{desc.desc}</desc>
    {/if}
      {#if variation === 'outline'}
        <path d="M15.0423 21.6718L13.6835 16.6007M13.6835 16.6007L11.1741 18.826L11.7425 9.35623L16.9697 17.2731L13.6835 16.6007ZM12 2.25V4.5M17.8336 4.66637L16.2426 6.25736M20.25 10.5H18M7.75736 14.7426L6.16637 16.3336M6 10.5H3.75M7.75736 6.25736L6.16637 4.66637" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
      {:else if variation === 'mini'}
        <path d="M10 1C10.4142 1 10.75 1.33579 10.75 1.75V3.25C10.75 3.66421 10.4142 4 10 4C9.58579 4 9.25 3.66421 9.25 3.25V1.75C9.25 1.33579 9.58579 1 10 1Z" fill="{color}"/> <path d="M5.05025 3.05025C5.34315 2.75736 5.81802 2.75736 6.11091 3.05025L7.17157 4.11091C7.46447 4.40381 7.46447 4.87868 7.17157 5.17157C6.87868 5.46447 6.40381 5.46447 6.11091 5.17157L5.05025 4.11091C4.75736 3.81802 4.75736 3.34315 5.05025 3.05025Z" fill="{color}"/> <path d="M14.9497 3.05025C15.2426 3.34315 15.2426 3.81802 14.9497 4.11091L13.8891 5.17157C13.5962 5.46447 13.1213 5.46447 12.8284 5.17157C12.5355 4.87868 12.5355 4.40381 12.8284 4.11091L13.8891 3.05025C14.182 2.75736 14.6569 2.75736 14.9497 3.05025Z" fill="{color}"/> <path d="M3 8C3 7.58579 3.33579 7.25 3.75 7.25H5.25C5.66421 7.25 6 7.58579 6 8C6 8.41421 5.66421 8.75 5.25 8.75H3.75C3.33579 8.75 3 8.41421 3 8Z" fill="{color}"/> <path d="M14 8C14 7.58579 14.3358 7.25 14.75 7.25H16.25C16.6642 7.25 17 7.58579 17 8C17 8.41421 16.6642 8.75 16.25 8.75H14.75C14.3358 8.75 14 8.41421 14 8Z" fill="{color}"/> <path d="M7.17157 10.8284C7.46447 11.1213 7.46447 11.5962 7.17157 11.8891L6.11091 12.9497C5.81802 13.2426 5.34315 13.2426 5.05025 12.9497C4.75736 12.6569 4.75736 12.182 5.05025 11.8891L6.11091 10.8284C6.40381 10.5355 6.87868 10.5355 7.17157 10.8284Z" fill="{color}"/> <path d="M10.7657 7.51062C10.5871 7.24492 10.2596 7.12184 9.95029 7.20417C9.64094 7.2865 9.41795 7.5561 9.3951 7.8754L8.90409 14.7363C8.88303 15.0306 9.0365 15.3099 9.29622 15.4499C9.55594 15.59 9.87365 15.5647 10.108 15.3854L11.1508 14.5873L12.1363 18.2653C12.2435 18.6654 12.6548 18.9028 13.0549 18.7956C13.455 18.6884 13.6924 18.2771 13.5852 17.877L12.6083 14.2312L13.9005 14.4349C14.1951 14.4814 14.4893 14.3489 14.6497 14.0974C14.81 13.846 14.8062 13.5233 14.6398 13.2758L10.7657 7.51062Z" fill="{color}"/> 
      {:else if variation === 'micro'}
        <path d="M7.25 1.75C7.25 1.33579 7.58579 1 8 1C8.41421 1 8.75 1.33579 8.75 1.75V3.25C8.75 3.66421 8.41421 4 8 4C7.58579 4 7.25 3.66421 7.25 3.25V1.75Z" fill="{color}"/> <path d="M11.5356 2.9038C11.8285 2.61091 12.3034 2.61091 12.5962 2.9038C12.8891 3.1967 12.8891 3.67157 12.5962 3.96446L11.5356 5.02512C11.2427 5.31802 10.7678 5.31802 10.4749 5.02512C10.182 4.73223 10.182 4.25736 10.4749 3.96446L11.5356 2.9038Z" fill="{color}"/> <path d="M14.5 7.5C14.5 7.08579 14.1642 6.75 13.75 6.75H12.25C11.8358 6.75 11.5 7.08579 11.5 7.5C11.5 7.91421 11.8358 8.25 12.25 8.25H13.75C14.1642 8.25 14.5 7.91421 14.5 7.5Z" fill="{color}"/> <path d="M4.46442 9.97488C4.75731 9.68199 5.23219 9.68199 5.52508 9.97488C5.81797 10.2678 5.81797 10.7426 5.52508 11.0355L4.46442 12.0962C4.17153 12.3891 3.69665 12.3891 3.40376 12.0962C3.11087 11.8033 3.11087 11.3284 3.40376 11.0355L4.46442 9.97488Z" fill="{color}"/> <path d="M4.5 7.5C4.5 7.08579 4.16421 6.75 3.75 6.75H2.25C1.83579 6.75 1.5 7.08579 1.5 7.5C1.5 7.91421 1.83579 8.25 2.25 8.25H3.75C4.16421 8.25 4.5 7.91421 4.5 7.5Z" fill="{color}"/> <path d="M5.52509 3.96447C5.81798 4.25736 5.81798 4.73223 5.52509 5.02513C5.2322 5.31802 4.75732 5.31802 4.46443 5.02513L3.40377 3.96447C3.11088 3.67157 3.11088 3.1967 3.40377 2.90381C3.69666 2.61091 4.17154 2.61091 4.46443 2.90381L5.52509 3.96447Z" fill="{color}"/> <path d="M8.77875 7.438C8.59919 7.17468 8.27284 7.05361 7.96499 7.13609C7.65714 7.21858 7.43504 7.48662 7.4112 7.80443L7.01493 13.087C6.99268 13.3835 7.14774 13.6652 7.41019 13.805C7.67265 13.9448 7.99292 13.9164 8.22662 13.7325L8.82888 13.2586L9.11664 14.3332C9.22379 14.7333 9.63501 14.9708 10.0351 14.8636C10.4352 14.7565 10.6727 14.3453 10.5656 13.9451L10.2777 12.8702L11.0366 12.9796C11.3309 13.022 11.6225 12.8865 11.7799 12.6342C11.9373 12.3819 11.9307 12.0604 11.7632 11.8147L8.77875 7.438Z" fill="{color}"/> 
      {:else}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.5C12.4142 1.5 12.75 1.83579 12.75 2.25V4.5C12.75 4.91421 12.4142 5.25 12 5.25C11.5858 5.25 11.25 4.91421 11.25 4.5V2.25C11.25 1.83579 11.5858 1.5 12 1.5ZM5.63604 4.13604C5.92893 3.84315 6.40381 3.84315 6.6967 4.13604L8.28769 5.72703C8.58058 6.01992 8.58058 6.4948 8.28769 6.78769C7.9948 7.08058 7.51992 7.08058 7.22703 6.78769L5.63604 5.1967C5.34315 4.90381 5.34315 4.42893 5.63604 4.13604ZM18.364 4.13604C18.6569 4.42893 18.6569 4.90381 18.364 5.1967L16.773 6.78769C16.4801 7.08058 16.0052 7.08058 15.7123 6.78769C15.4194 6.4948 15.4194 6.01992 15.7123 5.72703L17.3033 4.13604C17.5962 3.84315 18.0711 3.84315 18.364 4.13604ZM11.5484 8.63179C11.8602 8.54824 12.1905 8.67359 12.3684 8.94299L17.5955 16.8599C17.7627 17.113 17.7609 17.4419 17.591 17.6932C17.421 17.9445 17.1165 18.0687 16.8193 18.0079L14.722 17.5787L15.7668 21.4777C15.874 21.8778 15.6365 22.289 15.2364 22.3963C14.8363 22.5035 14.4251 22.266 14.3179 21.8659L13.2732 17.967L11.6717 19.3872C11.4447 19.5884 11.1189 19.6332 10.8461 19.5005C10.5733 19.3678 10.4073 19.0839 10.4254 18.7811L10.9939 9.3113C11.0132 8.98905 11.2366 8.71534 11.5484 8.63179ZM3 10.5C3 10.0858 3.33579 9.75 3.75 9.75H6C6.41421 9.75 6.75 10.0858 6.75 10.5C6.75 10.9142 6.41421 11.25 6 11.25H3.75C3.33579 11.25 3 10.9142 3 10.5ZM17.25 10.5C17.25 10.0858 17.5858 9.75 18 9.75H20.25C20.6642 9.75 21 10.0858 21 10.5C21 10.9142 20.6642 11.25 20.25 11.25H18C17.5858 11.25 17.25 10.9142 17.25 10.5ZM8.28769 14.2123C8.58058 14.5052 8.58058 14.9801 8.28769 15.273L6.6967 16.864C6.40381 17.1569 5.92893 17.1569 5.63604 16.864C5.34315 16.5711 5.34315 16.0962 5.63604 15.8033L7.22703 14.2123C7.51992 13.9194 7.9948 13.9194 8.28769 14.2123Z" fill="{color}"/> 
      {/if}
  </svg>
{/if}


