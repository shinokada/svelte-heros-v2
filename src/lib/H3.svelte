<script lang="ts">
  import { getContext } from 'svelte';
  import type { BaseProps, Props } from './types';

  const ctx: BaseProps = getContext('iconCtx') ?? {};

  let {
    size = ctx.size,
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || 'outline',
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    ariaLabel = 'h3',
    ...restProps
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));

  let viewBox = $derived.by(() => {
    if (variation === 'mini') return '0 0 20 20';
    if (variation === 'micro') return '0 0 16 16';
    return '0 0 24 24';
  });
  let variationSize = $derived.by(() => {
    if (variation === 'mini') return '20';
    if (variation === 'micro') return '16';
    return '24';
  });
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size || variationSize}
  height={size || variationSize}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {#if variation === 'outline'}
    <path
      d="M20.9055 14.6257C21.437 15.3646 21.75 16.2711 21.75 17.2508C21.75 17.5866 21.7132 17.9139 21.6435 18.2287C21.4894 18.9241 20.8486 19.3722 20.1393 19.4374C19.6818 19.4794 19.2184 19.5008 18.75 19.5008C17.9853 19.5008 17.2339 19.4436 16.5 19.3332M20.9055 14.6257C21.437 13.8869 21.75 12.9803 21.75 12.0007C21.75 11.6648 21.7132 11.3376 21.6435 11.0228C21.4894 10.3273 20.8486 9.87924 20.1393 9.8141C19.6818 9.77209 19.2184 9.75061 18.75 9.75061C17.9853 9.75061 17.2339 9.80784 16.5 9.91824M20.9055 14.6257H18M2.24268 4.49316V11.9939M2.24268 11.9939V19.4946M2.24268 11.9939L12.7429 11.9946M12.7429 4.49389V11.9946M12.7429 11.9946V19.4953"
      stroke={color}
      stroke-width={strokeWidth}
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  {:else if variation === 'mini'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M2.75 4C3.16421 4 3.5 4.33579 3.5 4.75V9.25H8.5V4.75C8.5 4.33579 8.83579 4 9.25 4C9.66421 4 10 4.33579 10 4.75V15.25C10 15.6642 9.66421 16 9.25 16C8.83579 16 8.5 15.6642 8.5 15.25V10.75H3.5V15.25C3.5 15.6642 3.16421 16 2.75 16C2.33579 16 2 15.6642 2 15.25V4.75C2 4.33579 2.33579 4 2.75 4ZM15 9.5C14.27 9.5 13.5524 9.55124 12.8505 9.65021C12.4403 9.70805 12.061 9.42244 12.0031 9.01228C11.9453 8.60212 12.2309 8.22274 12.6411 8.16491C13.4121 8.05618 14.1997 8 15 8C15.3754 8 15.7479 8.01236 16.1173 8.0367C17.1015 8.10157 17.995 8.87442 17.9999 9.96896L17.9999 9.97064L18 10C18 10.6953 17.8946 11.3672 17.6986 12C17.8946 12.6328 18 13.3047 18 14L18 14.0017L17.9999 14.0294L17.9999 14.031C17.995 15.1256 17.1015 15.8984 16.1173 15.9633C15.7479 15.9876 15.3754 16 15 16C14.2028 16 13.4183 15.9443 12.6501 15.8364C12.2399 15.7788 11.9541 15.3995 12.0117 14.9893C12.0693 14.5792 12.4485 14.2933 12.8587 14.3509C13.558 14.4492 14.2729 14.5 15 14.5C15.3424 14.5 15.6821 14.4887 16.0187 14.4665C16.327 14.4462 16.4987 14.2258 16.4999 14.0249V14.0249L16.5 14C16.5 13.5686 16.4481 13.1501 16.3505 12.75H13.7497C13.3355 12.75 12.9997 12.4142 12.9997 12C12.9997 11.5858 13.3355 11.25 13.7497 11.25H16.3505C16.4481 10.8502 16.4999 10.432 16.5 10.0008V10.0008L16.4999 9.97573C16.499 9.77462 16.3273 9.5538 16.0187 9.53346C15.6821 9.51127 15.3424 9.5 15 9.5Z"
      fill={color}
    />
  {:else if variation === 'micro'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M1.75 3C2.16421 3 2.5 3.33579 2.5 3.75V7.25H6.5V3.75C6.5 3.33579 6.83579 3 7.25 3C7.66421 3 8 3.33579 8 3.75V12.25C8 12.6642 7.66421 13 7.25 13C6.83579 13 6.5 12.6642 6.5 12.25V8.75H2.5V12.25C2.5 12.6642 2.16421 13 1.75 13C1.33579 13 1 12.6642 1 12.25V3.75C1 3.33579 1.33579 3 1.75 3ZM12.5 7.5C11.9417 7.5 11.3933 7.54061 10.8576 7.61893C10.4478 7.67884 10.0669 7.39516 10.007 6.9853C9.94709 6.57545 10.2308 6.19462 10.6406 6.1347C11.248 6.04592 11.8689 6 12.5 6C12.8354 6 13.1679 6.01297 13.497 6.03845C14.1931 6.09233 14.8598 6.59912 14.9613 7.39113C14.9868 7.5908 15 7.79405 15 8C15 8.52313 14.9152 9.02773 14.7581 9.5C14.9152 9.97227 15 10.4769 15 11C15 11.206 14.9868 11.4092 14.9613 11.6089C14.8598 12.4009 14.1931 12.9077 13.497 12.9616C13.1679 12.987 12.8354 13 12.5 13C11.8689 13 11.248 12.9541 10.6406 12.8653C10.2308 12.8054 9.9471 12.4246 10.007 12.0147C10.0669 11.6048 10.4478 11.3212 10.8576 11.3811C11.3933 11.4594 11.9417 11.5 12.5 11.5C12.7967 11.5 13.0906 11.4885 13.3813 11.466C13.4196 11.4631 13.4471 11.4483 13.4615 11.4357C13.4681 11.4298 13.4718 11.4238 13.4718 11.4238L13.4728 11.4213L13.4734 11.4182C13.4909 11.2816 13.5 11.142 13.5 11C13.5 10.7413 13.4699 10.4903 13.4132 10.25H11.7501C11.3359 10.25 11.0001 9.91421 11.0001 9.5C11.0001 9.08579 11.3359 8.75 11.7501 8.75H13.4132C13.4699 8.5097 13.5 8.2587 13.5 8C13.5 7.85797 13.4909 7.71841 13.4734 7.58181C13.473 7.57859 13.4718 7.57619 13.4718 7.57619C13.4718 7.57619 13.4681 7.57018 13.4615 7.56434C13.4471 7.5517 13.4196 7.53694 13.3813 7.53397C13.0906 7.51147 12.7967 7.5 12.5 7.5Z"
      fill={color}
    />
  {:else}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M12.7488 3.74316C13.163 3.74316 13.4988 4.07897 13.4988 4.4932V19.4946C13.4988 19.9089 13.163 20.2447 12.7488 20.2447C12.3346 20.2447 11.9988 19.9089 11.9988 19.4946V12.7447H2.99711V19.4954C2.99711 19.9096 2.66132 20.2454 2.24709 20.2454C1.83287 20.2454 1.49707 19.9096 1.49707 19.4954V4.49393C1.49707 4.07969 1.83287 3.74389 2.24709 3.74389C2.66132 3.74389 2.99711 4.07969 2.99711 4.49393V11.2446H11.9988V4.4932C11.9988 4.07897 12.3346 3.74316 12.7488 3.74316Z"
      fill={color}
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M18.7499 10.5007C18.0226 10.5007 17.3086 10.5551 16.6114 10.66C16.2018 10.7216 15.8198 10.4395 15.7582 10.0299C15.6966 9.62026 15.9787 9.23825 16.3883 9.17663C17.1591 9.06069 17.9477 9.00066 18.7499 9.00066C19.2412 9.00066 19.7275 9.02318 20.2078 9.06729C21.1589 9.15464 22.1344 9.77225 22.3756 10.8606C22.4571 11.2283 22.4999 11.61 22.4999 12.0007C22.4999 12.9561 22.2441 13.8533 21.7974 14.6258C22.2441 15.3983 22.4999 16.2955 22.4999 17.2509C22.4999 17.6416 22.4571 18.0233 22.3756 18.391C22.1344 19.4793 21.1589 20.0969 20.2078 20.1843C19.7275 20.2284 19.2412 20.2509 18.7499 20.2509C17.9477 20.2509 17.1591 20.1909 16.3883 20.075C15.9787 20.0133 15.6966 19.6313 15.7582 19.2217C15.8198 18.8121 16.2018 18.53 16.6114 18.5916C17.3086 18.6965 18.0226 18.7509 18.7499 18.7509C19.1954 18.7509 19.6359 18.7305 20.0706 18.6906C20.538 18.6476 20.8441 18.369 20.9111 18.0665C20.9691 17.8046 20.9999 17.5318 20.9999 17.2509C20.9999 16.5669 20.8174 15.9271 20.4984 15.3758H17.9999C17.5857 15.3758 17.2499 15.04 17.2499 14.6258C17.2499 14.2116 17.5857 13.8758 17.9999 13.8758H20.4984C20.8174 13.3245 20.9999 12.6847 20.9999 12.0007C20.9999 11.7198 20.9691 11.447 20.9111 11.1851C20.8441 10.8826 20.538 10.604 20.0706 10.561C19.6359 10.5211 19.1954 10.5007 18.7499 10.5007Z"
      fill={color}
    />
  {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || 'outline'
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop ariaLabel = 'h3'
@prop ...restProps
-->
