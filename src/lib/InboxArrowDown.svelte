<script lang="ts">
  import { getContext } from 'svelte';
  import type { CtxType, Props } from './types'
  
  const ctx: CtxType = getContext('iconCtx') ?? {};

  let {
    size = ctx.size,
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || "outline",
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    ariaLabel = "inbox arrow down",
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));

  let viewBox = $derived.by(() => {
    if (variation === 'mini') return '0 0 20 20';
    if (variation === 'micro') return '0 0 16 16';
    return '0 0 24 24';
  });
  let variationSize = $derived.by(() => {
    if (variation === 'mini') return '20';
    if (variation === 'micro') return '16';
    return '24';
  });
  
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size || variationSize}
  height={size || variationSize}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id="{title.id}">{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id="{desc.id}">{desc.desc}</desc>
  {/if}
    {#if variation === 'outline'}
      <path d="M9 3.75H6.91179C5.92403 3.75 5.05178 4.39423 4.76129 5.33831L2.3495 13.1766C2.28354 13.391 2.25 13.614 2.25 13.8383V18C2.25 19.2426 3.25736 20.25 4.5 20.25H19.5C20.7426 20.25 21.75 19.2426 21.75 18V13.8383C21.75 13.614 21.7165 13.391 21.6505 13.1766L19.2387 5.33831C18.9482 4.39423 18.076 3.75 17.0882 3.75H15M2.25 13.5H6.10942C6.96166 13.5 7.74075 13.9815 8.12188 14.7438L8.37812 15.2562C8.75925 16.0185 9.53834 16.5 10.3906 16.5H13.6094C14.4617 16.5 15.2408 16.0185 15.6219 15.2562L15.8781 14.7438C16.2592 13.9815 17.0383 13.5 17.8906 13.5H21.75M12 3V11.25M12 11.25L9 8.25M12 11.25L15 8.25" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
    {:else if variation === 'mini'}
      <path d="M10 2C10.4142 2 10.75 2.33579 10.75 2.75V8.3401L12.7004 6.23966C12.9823 5.93613 13.4568 5.91855 13.7603 6.20041C14.0639 6.48226 14.0814 6.95681 13.7996 7.26034L10.5496 10.7603C10.4077 10.9132 10.2086 11 10 11C9.79145 11 9.59231 10.9132 9.45041 10.7603L6.20041 7.26034C5.91855 6.95681 5.93613 6.48226 6.23966 6.20041C6.54319 5.91855 7.01774 5.93613 7.29959 6.23966L9.25 8.3401V2.75C9.25 2.33579 9.58579 2 10 2Z" fill="{color}"/> <path d="M5.27298 4.5C4.71065 4.5 4.21753 4.8755 4.06799 5.41759L2.54501 10.9384C2.53938 10.9588 2.53427 10.9794 2.52969 11H6C6.37877 11 6.72504 11.214 6.89443 11.5528L7.34164 12.4472C7.51103 12.786 7.8573 13 8.23607 13H11.674C12.0269 13 12.3537 12.814 12.5339 12.5105L13.1401 11.4895C13.3203 11.186 13.6471 11 14 11H17.4703C17.4657 10.9794 17.4606 10.9588 17.455 10.9384L15.932 5.41759C15.7825 4.8755 15.2894 4.5 14.727 4.5H13.75C13.3358 4.5 13 4.16421 13 3.75C13 3.33579 13.3358 3 13.75 3H14.727C15.9642 3 17.049 3.8261 17.378 5.0187L18.901 10.5395C18.9667 10.7777 19 11.0237 19 11.2708V15C19 16.1046 18.1046 17 17 17H3C1.89543 17 1 16.1046 1 15V11.2708C1 11.0237 1.03331 10.7777 1.09902 10.5395L2.622 5.0187C2.95099 3.82611 4.03584 3 5.27298 3H6.25C6.66421 3 7 3.33579 7 3.75C7 4.16421 6.66421 4.5 6.25 4.5H5.27298Z" fill="{color}"/> 
    {:else if variation === 'micro'}
      <path d="M8.75 2.75C8.75 2.33579 8.41421 2 8 2C7.58579 2 7.25 2.33579 7.25 2.75V6.43934L6.53033 5.71967C6.23744 5.42678 5.76256 5.42678 5.46967 5.71967C5.17678 6.01256 5.17678 6.48744 5.46967 6.78033L7.46967 8.78033C7.76256 9.07322 8.23744 9.07322 8.53033 8.78033L10.5303 6.78033C10.8232 6.48744 10.8232 6.01256 10.5303 5.71967C10.2374 5.42678 9.76256 5.42678 9.46967 5.71967L8.75 6.43934V2.75Z" fill="{color}"/> <path d="M4.78373 4.5C4.47252 4.5 4.19365 4.69219 4.08286 4.983L2.55258 9H4.96482C5.29917 9 5.6114 9.1671 5.79687 9.4453L6.20313 10.0547C6.3886 10.3329 6.70083 10.5 7.03518 10.5H8.96482C9.29917 10.5 9.6114 10.3329 9.79687 10.0547L10.2031 9.4453C10.3886 9.1671 10.7008 9 11.0352 9H13.4474L11.9171 4.983C11.8063 4.69219 11.5275 4.5 11.2163 4.5H10.75C10.3358 4.5 10 4.16421 10 3.75C10 3.33579 10.3358 3 10.75 3H11.2163C12.1499 3 12.9865 3.57656 13.3189 4.44901L14.8526 8.47505C14.95 8.73086 15 9.0023 15 9.27604V10.75C15 11.9926 13.9926 13 12.75 13H3.25C2.00736 13 1 11.9926 1 10.75V9.27604C1 9.0023 1.04995 8.73086 1.1474 8.47505L2.68113 4.44901C3.01349 3.57656 3.85012 3 4.78373 3H5.25C5.66421 3 6 3.33579 6 3.75C6 4.16421 5.66421 4.5 5.25 4.5H4.78373Z" fill="{color}"/> 
    {:else}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M5.47812 5.55887C5.67178 4.92948 6.25329 4.5 6.91179 4.5H9C9.41421 4.5 9.75 4.16421 9.75 3.75C9.75 3.33579 9.41421 3 9 3H6.91179C5.59478 3 4.43177 3.85897 4.04446 5.11774L1.63266 12.9561C1.54472 13.2419 1.5 13.5393 1.5 13.8383V18C1.5 19.6569 2.84315 21 4.5 21H19.5C21.1569 21 22.5 19.6569 22.5 18V13.8383C22.5 13.5393 22.4553 13.2419 22.3673 12.9561L19.9555 5.11774C19.5682 3.85897 18.4052 3 17.0882 3H15C14.5858 3 14.25 3.33579 14.25 3.75C14.25 4.16421 14.5858 4.5 15 4.5H17.0882C17.7467 4.5 18.3282 4.92948 18.5219 5.55887L20.7345 12.75H17.8906C16.7543 12.75 15.7155 13.392 15.2073 14.4084L14.9511 14.9208C14.697 15.429 14.1776 15.75 13.6094 15.75H10.3906C9.82242 15.75 9.30302 15.429 9.04894 14.9208L8.79271 14.4084C8.28453 13.392 7.24574 12.75 6.10942 12.75H3.26547L5.47812 5.55887Z" fill="{color}"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V9.43934L14.4697 7.71967C14.7626 7.42678 15.2374 7.42678 15.5303 7.71967C15.8232 8.01256 15.8232 8.48744 15.5303 8.78033L12.5303 11.7803C12.2374 12.0732 11.7626 12.0732 11.4697 11.7803L8.46967 8.78033C8.17678 8.48744 8.17678 8.01256 8.46967 7.71967C8.76256 7.42678 9.23744 7.42678 9.53033 7.71967L11.25 9.43934V3C11.25 2.58579 11.5858 2.25 12 2.25Z" fill="{color}"/> 
    {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || "outline"
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop ariaLabel = "inbox arrow down"
@prop ...restProps
-->
