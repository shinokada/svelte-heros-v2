<script lang="ts">
  import { getContext } from 'svelte';
  import type { BaseProps, Props } from './types';

  const ctx: BaseProps = getContext('iconCtx') ?? {};

  let {
    size = ctx.size,
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || 'outline',
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    ariaLabel = 'scale',
    ...restProps
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));

  let viewBox = $derived.by(() => {
    if (variation === 'mini') return '0 0 20 20';
    if (variation === 'micro') return '0 0 16 16';
    return '0 0 24 24';
  });
  let variationSize = $derived.by(() => {
    if (variation === 'mini') return '20';
    if (variation === 'micro') return '16';
    return '24';
  });
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size || variationSize}
  height={size || variationSize}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {#if variation === 'outline'}
    <path
      d="M12 3V20.25M12 20.25C10.528 20.25 9.1179 20.515 7.81483 21M12 20.25C13.472 20.25 14.8821 20.515 16.1852 21M18.75 4.97089C16.5446 4.66051 14.291 4.5 12 4.5C9.70897 4.5 7.45542 4.66051 5.25 4.97089M18.75 4.97089C19.7604 5.1131 20.7608 5.28677 21.75 5.49087M18.75 4.97089L21.3704 15.6961C21.4922 16.1948 21.2642 16.7237 20.7811 16.8975C20.1468 17.1257 19.4629 17.25 18.75 17.25C18.0371 17.25 17.3532 17.1257 16.7189 16.8975C16.2358 16.7237 16.0078 16.1948 16.1296 15.6961L18.75 4.97089ZM2.25 5.49087C3.23922 5.28677 4.23956 5.1131 5.25 4.97089M5.25 4.97089L7.87036 15.6961C7.9922 16.1948 7.76419 16.7237 7.28114 16.8975C6.6468 17.1257 5.96292 17.25 5.25 17.25C4.53708 17.25 3.8532 17.1257 3.21886 16.8975C2.73581 16.7237 2.5078 16.1948 2.62964 15.6961L5.25 4.97089Z"
      stroke={color}
      stroke-width={strokeWidth}
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  {:else if variation === 'mini'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M10 2C10.4143 2 10.75 2.33579 10.75 2.75V3.00836C12.231 3.0414 13.6882 3.17204 15.1154 3.39419C15.8922 3.51509 16.66 3.6631 17.418 3.83721C17.8217 3.92994 18.0737 4.33239 17.981 4.73608C17.8883 5.13978 17.4858 5.39187 17.0821 5.29913C16.7168 5.21521 16.3491 5.13764 15.979 5.06655L17.6814 12.6123C17.7565 12.9452 17.5975 13.2868 17.2944 13.4435C16.6064 13.7994 15.8256 14 15 14C14.1745 14 13.3937 13.7994 12.7057 13.4435C12.4026 13.2868 12.2436 12.9452 12.3187 12.6123L14.0896 4.76296C12.9933 4.62087 11.8791 4.53512 10.75 4.50875V16.0138C12.0446 16.0616 13.3083 16.2324 14.5296 16.5153C14.9331 16.6087 15.1845 17.0116 15.091 17.4151C14.9976 17.8187 14.5947 18.07 14.1912 17.9766C12.8452 17.6649 11.4424 17.5 10 17.5C8.55772 17.5 7.15486 17.6649 5.80893 17.9766C5.40539 18.07 5.00251 17.8187 4.90906 17.4151C4.81561 17.0116 5.06699 16.6087 5.47052 16.5153C6.69183 16.2324 7.95553 16.0616 9.25004 16.0138V4.50875C8.12096 4.53512 7.00679 4.62087 5.91051 4.76296L7.68142 12.6123C7.75652 12.9452 7.59746 13.2868 7.29437 13.4435C6.6064 13.7994 5.82556 14 5.00004 14C4.17453 14 3.39369 13.7994 2.70572 13.4435C2.40263 13.2868 2.24356 12.9452 2.31866 12.6123L4.02108 5.06655C3.65102 5.13764 3.28327 5.21521 2.91796 5.29913C2.51426 5.39187 2.11182 5.13978 2.01908 4.73608C1.92635 4.33239 2.17843 3.92994 2.58213 3.83721C3.34006 3.6631 4.10791 3.51509 4.8847 3.39419C6.31192 3.17204 7.76912 3.0414 9.25004 3.00836V2.75C9.25004 2.33579 9.58583 2 10 2ZM5.00004 7.54309L3.91997 12.3304C4.25962 12.4404 4.62241 12.5 5.00004 12.5C5.37768 12.5 5.74047 12.4404 6.08012 12.3304L5.00004 7.54309ZM15 7.5431L13.92 12.3304C14.2596 12.4404 14.6224 12.5 15 12.5C15.3777 12.5 15.7405 12.4404 16.0801 12.3304L15 7.5431Z"
      fill={color}
    />
  {:else if variation === 'micro'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M8.75 2.5C8.75 2.08579 8.41421 1.75 8 1.75C7.58579 1.75 7.25 2.08579 7.25 2.5V3.00849C5.67898 3.04408 4.13508 3.1912 2.62601 3.44235C2.21742 3.51035 1.94132 3.89671 2.00932 4.3053C2.07732 4.71389 2.46367 4.99 2.87227 4.922L3.00168 4.90074L1.81432 9.6502C1.73555 9.96527 1.86852 10.2952 2.14373 10.4677C2.68226 10.8051 3.31949 11 3.99995 11C4.68041 11 5.31763 10.8051 5.85616 10.4677C6.13138 10.2952 6.26435 9.96527 6.18558 9.6502L4.93541 4.64952C5.69905 4.5746 6.47091 4.52738 7.25 4.50889V12L7.25009 12.0117C6.36827 12.0394 5.49846 12.1157 4.64327 12.238C4.23323 12.2967 3.94838 12.6766 4.00704 13.0867C4.06571 13.4967 4.44566 13.7816 4.8557 13.7229C5.88227 13.576 6.93206 13.5 8.00004 13.5C9.06803 13.5 10.1178 13.576 11.1444 13.7229C11.5544 13.7816 11.9344 13.4967 11.993 13.0867C12.0517 12.6766 11.7669 12.2967 11.3568 12.238C10.5016 12.1157 9.63176 12.0394 8.74991 12.0117L8.75 12V4.50889C9.52877 4.52737 10.3003 4.57456 11.0637 4.64942L9.81346 9.6502C9.73469 9.96527 9.86766 10.2952 10.1429 10.4677C10.6814 10.8051 11.3186 11 11.9991 11C12.6796 11 13.3168 10.8051 13.8553 10.4677C14.1305 10.2952 14.2635 9.96527 14.1847 9.6502L12.9973 4.90057C13.0408 4.90762 13.0843 4.91477 13.1278 4.922C13.5364 4.99 13.9227 4.71389 13.9907 4.3053C14.0587 3.89671 13.7826 3.51035 13.374 3.44235C11.865 3.1912 10.321 3.04408 8.75 3.00849V2.5ZM3.41937 9.41464C3.60278 9.47014 3.79757 9.5 3.99995 9.5C4.20233 9.5 4.39712 9.47014 4.58052 9.41464L3.99995 7.09233L3.41937 9.41464ZM11.9991 9.5C11.7967 9.5 11.6019 9.47014 11.4185 9.41464L11.9991 7.09233L12.5797 9.41464C12.3963 9.47014 12.2015 9.5 11.9991 9.5Z"
      fill={color}
    />
  {:else}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V3.75565C14.8183 3.78685 16.8558 3.94691 18.8546 4.22821C19.8808 4.37264 20.8968 4.54903 21.9016 4.75635C22.2784 4.83409 22.5352 5.18431 22.4962 5.56704C22.4571 5.94977 22.1348 6.24087 21.75 6.24087H19.8324L22.306 16.3654C22.3872 16.6979 22.2331 17.0431 21.9313 17.2046C20.9827 17.7124 19.8988 18 18.75 18C17.6012 18 16.5174 17.7124 15.5688 17.2046C15.267 17.0431 15.1129 16.6979 15.1941 16.3654L17.6677 6.24087H12.75V19.5217C14.0425 19.5968 15.2843 19.8645 16.4466 20.2971C16.7867 20.4237 16.9874 20.7757 16.9231 21.1329C16.8588 21.4901 16.5479 21.75 16.185 21.75H7.81465C7.4517 21.75 7.14083 21.4901 7.07652 21.1329C7.0122 20.7757 7.2129 20.4237 7.55305 20.2971C8.71543 19.8645 9.9574 19.5967 11.25 19.5217V6.24087H6.33238L8.80598 16.3654C8.88721 16.6979 8.73307 17.0431 8.43134 17.2046C7.48271 17.7124 6.39885 18 5.25004 18C4.10124 18 3.01738 17.7124 2.06875 17.2046C1.76702 17.0431 1.61288 16.6979 1.69411 16.3654L4.16771 6.24087H2.25004C1.86532 6.24087 1.54299 5.94977 1.50392 5.56704C1.46485 5.18431 1.7217 4.83409 2.09849 4.75635C3.10325 4.54903 4.11928 4.37264 5.14552 4.22821C7.14429 3.94691 9.18169 3.78686 11.25 3.75565V3C11.25 2.58579 11.5858 2.25 12 2.25ZM16.878 15.7934L18.75 8.13096L20.6221 15.7934H16.878ZM7.12211 15.7934L5.25004 8.13096L3.37797 15.7934H7.12211Z"
      fill={color}
    />
  {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || 'outline'
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop ariaLabel = 'scale'
@prop ...restProps
-->
