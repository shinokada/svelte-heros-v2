<script lang="ts">
  import { getContext } from 'svelte';
  import type { BaseProps, Props } from './types';

  const ctx: BaseProps = getContext('iconCtx') ?? {};

  let {
    size = ctx.size,
    role = ctx.role || 'img',
    color = ctx.color || 'currentColor',
    variation = ctx.variation || 'outline',
    strokeWidth = ctx.strokeWidth || '1.5',
    title,
    desc,
    focusable = 'false',
    ariaLabel,
    ...restProps
  }: Props = $props();

  const ariaDescribedby = $derived(`${title?.id || ''} ${desc?.id || ''}`.trim());
  const hasDescription = $derived(!!(title?.id || desc?.id));

  const sizeConfig = $derived(
    variation === 'mini'
      ? { viewBox: '0 0 20 20', size: '20' }
      : variation === 'micro'
        ? { viewBox: '0 0 16 16', size: '16' }
        : { viewBox: '0 0 24 24', size: '24' }
  );
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size || sizeConfig.size}
  height={size || sizeConfig.size}
  fill="none"
  {focusable}
  aria-label={title?.id ? undefined : ariaLabel}
  aria-labelledby={title?.id || undefined}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  viewBox={sizeConfig.viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {#if variation === 'outline'}
    <path
      d="M20.625 11.5046V19.7546C20.625 20.5831 19.9534 21.2546 19.125 21.2546H4.875C4.04657 21.2546 3.375 20.5831 3.375 19.7546V11.5046M11.625 5.12964C11.625 3.67989 10.4497 2.50464 9 2.50464C7.55025 2.50464 6.375 3.67989 6.375 5.12964C6.375 6.57939 7.55025 7.75464 9 7.75464C9.73451 7.75464 11.625 7.75464 11.625 7.75464M11.625 5.12964C11.625 5.84488 11.625 7.75464 11.625 7.75464M11.625 5.12964C11.625 3.67989 12.8003 2.50464 14.25 2.50464C15.6997 2.50464 16.875 3.67989 16.875 5.12964C16.875 6.57939 15.6997 7.75464 14.25 7.75464C13.5155 7.75464 11.625 7.75464 11.625 7.75464M11.625 7.75464V21.2546M3 11.5046H21C21.6213 11.5046 22.125 11.001 22.125 10.3796V8.87964C22.125 8.25832 21.6213 7.75464 21 7.75464H3C2.37868 7.75464 1.875 8.25832 1.875 8.87964V10.3796C1.875 11.001 2.37868 11.5046 3 11.5046Z"
      stroke={color}
      stroke-width={strokeWidth}
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  {:else if variation === 'mini'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M14.0002 6.00464C14.314 5.58681 14.5 5.06744 14.5 4.50464C14.5 3.12393 13.3807 2.00464 12 2.00464C11.1822 2.00464 10.4561 2.39731 10 3.0044C9.54389 2.39731 8.8178 2.00464 8 2.00464C6.61929 2.00464 5.5 3.12393 5.5 4.50464C5.5 5.06744 5.68597 5.58681 5.99982 6.00464H3.25C2.55964 6.00464 2 6.56428 2 7.25464V7.75464C2 8.44499 2.55964 9.00464 3.25 9.00464H9.25V6.00464H10.75V9.00464H16.75C17.4404 9.00464 18 8.44499 18 7.75464V7.25464C18 6.56428 17.4404 6.00464 16.75 6.00464H14.0002ZM13 4.50464C13 5.05692 12.5523 5.50464 12 5.50464H11L11 4.50464C11 3.95235 11.4477 3.50464 12 3.50464C12.5523 3.50464 13 3.95235 13 4.50464ZM7 4.50464C7 5.05692 7.44772 5.50464 8 5.50464H9V4.50464C9 3.95235 8.55228 3.50464 8 3.50464C7.44772 3.50464 7 3.95235 7 4.50464Z"
      fill={color}
    />
    <path
      d="M9.25 10.5046H3V15.2546C3 16.7734 4.23122 18.0046 5.75 18.0046H9.25V10.5046Z"
      fill={color}
    />
    <path
      d="M10.75 18.0046V10.5046H17V15.2546C17 16.7734 15.7688 18.0046 14.25 18.0046H10.75Z"
      fill={color}
    />
  {:else if variation === 'micro'}
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M3.75 3.50464C3.75 4.06744 3.93597 4.58681 4.24982 5.00464H2C1.44772 5.00464 1 5.45235 1 6.00464C1 6.55692 1.44772 7.00464 2 7.00464H7.25V5.00464H8.75V7.00464H14C14.5523 7.00464 15 6.55692 15 6.00464C15 5.45235 14.5523 5.00464 14 5.00464H11.7492C12.0631 4.58681 12.249 4.06744 12.249 3.50464C12.249 2.12393 11.1297 1.00464 9.74902 1.00464C9.06791 1.00464 8.45041 1.27702 7.99951 1.7188C7.54862 1.27702 6.93112 1.00464 6.25 1.00464C4.86929 1.00464 3.75 2.12393 3.75 3.50464ZM7.24902 3.50464L7.2493 3.46693C7.22947 2.93212 6.78966 2.50464 6.25 2.50464C5.69772 2.50464 5.25 2.95235 5.25 3.50464C5.25 4.05692 5.69772 4.50464 6.25 4.50464H7.24936L7.24902 3.50464ZM9.74902 2.50464C9.20937 2.50464 8.76955 2.93212 8.74972 3.46693L8.75 3.50464V4.50464H9.74902C10.3013 4.50464 10.749 4.05692 10.749 3.50464C10.749 2.95235 10.3013 2.50464 9.74902 2.50464Z"
      fill={color}
    />
    <path
      d="M7.25 8.50464H2V12.0046C2 13.1092 2.89543 14.0046 4 14.0046H7.25V8.50464Z"
      fill={color}
    />
    <path
      d="M8.75 14.0046V8.50464H14V12.0046C14 13.1092 13.1046 14.0046 12 14.0046H8.75Z"
      fill={color}
    />
  {:else}
    <path
      d="M9 3.25464C7.96447 3.25464 7.125 4.0941 7.125 5.12964C7.125 6.16517 7.96447 7.00464 9 7.00464H10.875V11.5046H3C1.96447 11.5046 1.125 10.6652 1.125 9.62964V8.87964C1.125 7.8441 1.96447 7.00464 3 7.00464H6.19333C5.83435 6.46835 5.625 5.82344 5.625 5.12964C5.625 3.26568 7.13604 1.75464 9 1.75464C10.0602 1.75464 11.0063 2.24351 11.625 3.00814C12.2437 2.24351 13.1898 1.75464 14.25 1.75464C16.114 1.75464 17.625 3.26568 17.625 5.12964C17.625 5.82344 17.4156 6.46835 17.0567 7.00464H21C22.0355 7.00464 22.875 7.8441 22.875 8.87964V9.62964C22.875 10.6652 22.0355 11.5046 21 11.5046H12.375V7.00464H14.25C15.2855 7.00464 16.125 6.16517 16.125 5.12964C16.125 4.0941 15.2855 3.25464 14.25 3.25464C13.2145 3.25464 12.375 4.0941 12.375 5.12964V7.00464H10.875V5.12964C10.875 4.0941 10.0355 3.25464 9 3.25464Z"
      fill={color}
    />
    <path
      d="M10.875 13.0046H2.625V19.7546C2.625 20.9973 3.63236 22.0046 4.875 22.0046H10.875V13.0046Z"
      fill={color}
    />
    <path
      d="M12.375 13.0046V22.0046H19.125C20.3676 22.0046 21.375 20.9973 21.375 19.7546V13.0046H12.375Z"
      fill={color}
    />
  {/if}
</svg>

<!--
@component
[Go to docs](https://svelte-heros-v2.codewithshin.com/)
## Props
@prop size = ctx.size
@prop role = ctx.role || 'img'
@prop color = ctx.color || 'currentColor'
@prop variation = ctx.variation || 'outline'
@prop strokeWidth = ctx.strokeWidth || '1.5'
@prop title
@prop desc
@prop focusable = 'false'
@prop ariaLabel
@prop ...restProps
-->
