<script lang="ts">
  import { getContext } from 'svelte';
  import type { CtxType, Props } from './types'
  
  const ctx: CtxType = getContext('iconCtx') ?? {};

  let { 
    size = ctx.size || '24', 
    role = ctx.role || 'img', 
    color = ctx.color || 'currentColor', 
    variation = ctx.variation || "outline",
    strokeWidth = ctx.strokeWidth || '1.5',
    title, 
    desc, 
    ariaLabel = "document currency bangladeshi", 
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = `${title?.id || ''} ${desc?.id || ''}`;
  const hasDescription = $derived(!!(title?.id || desc?.id));
  let viewBox: string = $state(''); 

  $effect(() => {
    if (variation === 'mini') {
      size = size || "20";
      viewBox = '0 0 20 20';
    } else if (variation === 'micro'){
      size = size || "16";
      viewBox = '0 0 16 16';
    } else {
      size = size || "24";
      viewBox = '0 0 24 24';
    }
  })
  
</script>

<svg
  xmlns="http://www.w3.org/2000/svg"
  {...restProps}
  {role}
  width={size}
  height={size}
  fill="none"
  aria-label={ariaLabel}
  aria-describedby={hasDescription ? ariaDescribedby : undefined}
  {viewBox}
  stroke-width={strokeWidth}
>
  {#if title?.id && title.title}
    <title id="{title.id}">{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id="{desc.id}">{desc.desc}</desc>
  {/if}
    {#if variation === 'outline'}
      <path d="M19.5 14.25V11.625C19.5 9.76104 17.989 8.25 16.125 8.25H14.625C14.0037 8.25 13.5 7.74632 13.5 7.125V5.625C13.5 3.76104 11.989 2.25 10.125 2.25H8.25M8.25 10.5L8.46967 10.2803C8.94214 9.80786 9.75 10.1425 9.75 10.8107V17.251C9.75 17.7227 9.96398 18.1849 10.3899 18.3877C10.8778 18.62 11.4237 18.75 12 18.75C13.4917 18.75 14.7799 17.8791 15.384 16.6179C15.5888 16.1903 15.2316 15.7501 14.7574 15.7501H14.25M8.25 13.5H15.75M10.5 2.25H5.625C5.00368 2.25 4.5 2.75368 4.5 3.375V20.625C4.5 21.2463 5.00368 21.75 5.625 21.75H18.375C18.9963 21.75 19.5 21.2463 19.5 20.625V11.25C19.5 6.27944 15.4706 2.25 10.5 2.25Z" stroke="{color}" stroke-width="{strokeWidth}" stroke-linecap="round" stroke-linejoin="round"/> 
    {:else if variation === 'mini'}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 2C3.67157 2 3 2.67157 3 3.5V16.5C3 17.3284 3.67157 18 4.5 18H15.5C16.3284 18 17 17.3284 17 16.5V7.62132C17 7.2235 16.842 6.84197 16.5607 6.56066L12.4393 2.43934C12.158 2.15804 11.7765 2 11.3787 2H4.5ZM6.46967 6.53075C6.68069 6.74177 6.98617 6.80076 7.25 6.70771V8.00043H5.75C5.33579 8.00043 5 8.33621 5 8.75043C5 9.16464 5.33579 9.50043 5.75 9.50043H7.25V12.5981C7.25 13.5788 7.82127 14.7774 9.08697 14.9544C9.304 14.9848 9.52539 15.0004 9.75 15.0004C11.7436 15.0004 13.4486 13.7725 14.1534 12.0345C14.2471 11.8033 14.2198 11.5406 14.0804 11.3336C13.941 11.1267 13.7078 11.0026 13.4583 11.0026H11.75C11.3358 11.0026 11 11.3384 11 11.7526C11 12.1669 11.3358 12.5026 11.75 12.5026H12.0933C11.5015 13.118 10.67 13.5004 9.75 13.5004C9.5951 13.5004 9.44315 13.4896 9.29476 13.4689C9.0454 13.434 8.75 13.1472 8.75 12.5981V9.50043H14.25C14.6642 9.50043 15 9.16464 15 8.75043C15 8.33621 14.6642 8.00043 14.25 8.00043H8.75V6.41464C8.75 5.22458 7.31117 4.62859 6.46967 5.47009C6.17678 5.76299 6.17678 6.23786 6.46967 6.53075Z" fill="{color}"/> 
    {:else if variation === 'micro'}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 3.5C2.5 2.67157 3.17157 2 4 2H8.87868C9.2765 2 9.65804 2.15804 9.93934 2.43934L13.0607 5.56066C13.342 5.84197 13.5 6.2235 13.5 6.62132V12.5C13.5 13.3284 12.8284 14 12 14H4C3.17157 14 2.5 13.3284 2.5 12.5V3.5ZM6.00016 5.2068C5.64837 5.33166 5.25056 5.17745 5.07934 4.83502C4.8941 4.46454 5.04427 4.01403 5.41475 3.82879C6.37287 3.34974 7.50016 4.04645 7.50016 5.11765V6H11.25C11.6642 6 12 6.33579 12 6.75C12 7.16421 11.6642 7.5 11.25 7.5H7.50016V10.7496C7.50016 10.962 7.58903 11.1392 7.69936 11.2406C7.79838 11.3316 7.90559 11.3601 8.03036 11.3253C8.62947 11.1581 9.18136 10.876 9.66049 10.5039H9.50016C9.08595 10.5039 8.75016 10.1682 8.75016 9.75394C8.75016 9.33973 9.08595 9.00394 9.50016 9.00394H11.3579C11.6332 9.00394 11.8864 9.15482 12.0175 9.39699C12.1485 9.63915 12.1363 9.93365 11.9857 10.1642C11.1678 11.416 9.91225 12.3574 8.4336 12.7701C7.76044 12.958 7.12674 12.7516 6.68434 12.345C6.25325 11.9488 6.00016 11.3657 6.00016 10.7496V7.5H4.75C4.33579 7.5 4 7.16421 4 6.75C4 6.33579 4.33579 6 4.75 6H6.00016V5.2068Z" fill="{color}"/> 
    {:else}
      <path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 3.375C3.75 2.33947 4.58947 1.5 5.625 1.5H9C11.0711 1.5 12.75 3.17893 12.75 5.25V7.125C12.75 8.16053 13.5895 9 14.625 9H16.5C18.5711 9 20.25 10.6789 20.25 12.75V20.625C20.25 21.6605 19.4105 22.5 18.375 22.5H5.625C4.58947 22.5 3.75 21.6605 3.75 20.625V3.375ZM14.25 5.25C14.25 3.93695 13.768 2.73648 12.9712 1.8159C16.3701 2.70377 19.0462 5.37988 19.9341 8.77881C19.0135 7.98204 17.8131 7.5 16.5 7.5H14.625C14.4179 7.5 14.25 7.33211 14.25 7.125V5.25ZM10.5 10.8106C10.5 9.47427 8.88429 8.80502 7.93934 9.74996L7.71967 9.96963C7.42678 10.2625 7.42678 10.7374 7.71967 11.0303C8.01256 11.3232 8.48744 11.3232 8.78033 11.0303L9 10.8106L9 12.75H8.25C7.83579 12.75 7.5 13.0858 7.5 13.5C7.5 13.9143 7.83579 14.25 8.25 14.25H9V17.2509C9 17.9211 9.30725 18.7029 10.0675 19.0649C10.6539 19.3441 11.3098 19.5 12 19.5C13.7911 19.5 15.3364 18.4535 16.0604 16.9419C16.2935 16.4553 16.2019 15.9413 15.9247 15.5728C15.6576 15.2176 15.226 15 14.7574 15H14.25C13.8358 15 13.5 15.3358 13.5 15.75C13.5 16.1643 13.8358 16.5 14.25 16.5H14.5988C14.0793 17.3979 13.1093 18 12 18C11.5376 18 11.1016 17.8959 10.7123 17.7105C10.6207 17.6669 10.5 17.5243 10.5 17.2509V14.25H15.75C16.1642 14.25 16.5 13.9143 16.5 13.5C16.5 13.0858 16.1642 12.75 15.75 12.75H10.5V10.8106Z" fill="{color}"/> 
    {/if}
</svg>



